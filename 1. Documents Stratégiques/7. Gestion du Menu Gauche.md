# Gestion du Menu Gauche - LeadGenAI AdBuilder
## Documentation StratÃ©gique ComplÃ¨te

---

## ğŸ“‹ RÃ‰SUMÃ‰ EXÃ‰CUTIF

### Vue d'Ensemble
Le systÃ¨me de navigation gauche de LeadGenAI AdBuilder repose sur une **architecture bicÃ©phale** avec sÃ©paration claire des responsabilitÃ©s :
- **Hook d'autorisation** : dÃ©termine les droits d'accÃ¨s selon le profil utilisateur
- **Gestionnaire de navigation** : transforme ces droits en interface concrÃ¨te

### Structure GÃ©nÃ©rale
Le menu gauche comprend **2 sections principales** :
1. **"Vos Assistants IA"** - Section mÃ©tier (gÃ©nÃ©ration annonces, outils marketing)
2. **"Dashboard"** - Section tableau de bord (espaces utilisateur selon droits)

---

## ğŸ—ï¸ ARCHITECTURE TECHNIQUE MODERNE

### ğŸ“ Fichiers ClÃ©s et ResponsabilitÃ©s

#### 1. Hook d'Autorisation : `1.Aut.Acces.Dashboard.tsx`
**RÃ´le** : Logique pure d'autorisation selon profil utilisateur

**ResponsabilitÃ©s** :
- Analyse du profil utilisateur (`roleSysteme`, `utilisateurTypeCompte`)
- DÃ©termination des espaces autorisÃ©s selon la hiÃ©rarchie
- GÃ©nÃ©ration des labels personnalisÃ©s pour chaque espace
- Retour d'un objet `AutorisationDashboard` standardisÃ©

**Types et Interface** :
```typescript
export type EspaceAutoriseType = 
  | "ADMIN-PRESENCA" 
  | "RESEAU-ESPACE" 
  | "CLIENT-ESPACE" 
  | "COLLABORATEUR-ESPACE";

export interface AutorisationDashboard {
  espacesAutorises: EspaceAutoriseType[];
  labelsEspaces: { espace: EspaceAutoriseType; label: string }[];
  isAutorised: boolean;
}
```

#### 2. Gestionnaire Navigation : `NavLinks.tsx`
**RÃ´le** : Transformation des autorisations en navigation concrÃ¨te

**ResponsabilitÃ©s** :
- Configuration des liens mÃ©tier ("Vos Assistants IA")
- Consommation du hook d'autorisation
- Construction dynamique des liens Dashboard
- Mapping espace â†’ route â†’ Ã©tat actif
- Gestion Ã©tat d'expansion et progression des Ã©tapes

---

## ğŸ” SYSTÃˆME D'AUTORISATION HIÃ‰RARCHIQUE

### ğŸ¯ Matrice des Droits d'AccÃ¨s

#### 1. Admin PRESENCA (Droits Complets)
```typescript
if (user.roleSysteme === "admin_presenca") {
  return {
    espacesAutorises: ["ADMIN-PRESENCA", "RESEAU-ESPACE", "CLIENT-ESPACE", "COLLABORATEUR-ESPACE"],
    labelsEspaces: [
      { espace: "ADMIN-PRESENCA", label: "Mon Espace Admin" },
      { espace: "RESEAU-ESPACE", label: "Espace RÃ©seau" },
      { espace: "CLIENT-ESPACE", label: "Espace Client" },
      { espace: "COLLABORATEUR-ESPACE", label: "Espace Collaborateur" }
    ],
    isAutorised: true
  };
}
```
**RÃ©sultat Interface** : 4 liens Dashboard visibles

#### 2. RÃ©seau / Direction RÃ©seau
```typescript
if (["reseau", "reseau_direction"].includes(user.utilisateurTypeCompte)) {
  return {
    espacesAutorises: ["RESEAU-ESPACE"],
    labelsEspaces: [{ espace: "RESEAU-ESPACE", label: "Mon Espace RÃ©seau" }]
  };
}
```
**RÃ©sultat Interface** : 1 lien "Mon Espace RÃ©seau"

#### 3. Responsables Agences
```typescript
if (["reseau_agence", "reseau_agence_responsable", "agence_independante", "agence_independante_responsable"].includes(user.utilisateurTypeCompte)) {
  return {
    espacesAutorises: ["CLIENT-ESPACE"],
    labelsEspaces: [{ espace: "CLIENT-ESPACE", label: "Mon Espace Client" }]
  };
}
```
**RÃ©sultat Interface** : 1 lien "Mon Espace Client"

#### 4. Collaborateurs
```typescript
if (["reseau_agence_collaborateur", "agence_independante_collaborateur"].includes(user.utilisateurTypeCompte)) {
  return {
    espacesAutorises: ["COLLABORATEUR-ESPACE"],
    labelsEspaces: [{ espace: "COLLABORATEUR-ESPACE", label: "Mon Espace Collaborateur" }]
  };
}
```
**RÃ©sultat Interface** : 1 lien "Mon Espace Collaborateur"

### ğŸ”„ Mapping Espace â†’ Route
```typescript
switch (espace) {
  case "ADMIN-PRESENCA": routePath = "/admin-presenca"; break;
  case "RESEAU-ESPACE": routePath = "/espace-reseau"; break;
  case "CLIENT-ESPACE": routePath = "/espace-client"; break;
  case "COLLABORATEUR-ESPACE": routePath = "/espace-collaborateur"; break;
}
```

---

## ğŸ¯ SECTION "VOS ASSISTANTS IA"

### ğŸ“‹ Configuration Actuelle
```typescript
export const navLinks: NavLink[] = [
  { to: "/accueil-leadgenai", label: "Accueil", isActive: false },
  { 
    to: "/etape1", 
    label: "Bien Ã  vendre ou Ã  louer", 
    expanded: false,
    subLinks: [
      { to: "/etape1", label: "Ã‰lÃ©ments clÃ©s" },
      { to: "/etape2", label: "Infos de description" },
      { to: "/etape3", label: "Infos FinanciÃ¨res" },
      { to: "/etape4", label: "Autres dÃ©tails" },
      { to: "/etape6communication", label: "Annonces et Outils Marketing" }
    ]
  },
  { to: "/zone-chalandise", label: "Zone de Chalandise Ã  analyser" },
  { to: "/newsletter-builder", label: "Newsletter Ã  lancer" },
  // Ã‰lÃ©ments en dÃ©veloppement (to: "#")
  { to: "#", label: "Landing Page Ã  crÃ©er" },
  { to: "#", label: "Bases de donnÃ©es Ã  constituer" },
  { to: "#", label: "Prospects Ã  relancer" },
  { to: "#", label: "Contenus Ã  rÃ©diger" },
  { to: "#", label: "PublicitÃ©s Ã  diffuser" }
];
```

### ğŸ” SystÃ¨me de DÃ©blocage Progressif
**Logique** : Ã‰tapes dÃ©bloquÃ©es sÃ©quentiellement selon validation
**Stockage** : `localStorage.stepProgress`
**ContrÃ´le** : Fonction `isStepUnlocked()`

---

## ğŸ¨ SYSTÃˆME GRAPHIQUE

### ğŸ“ Fichiers Design
**CSS Principal** : `src/components/navigation-site-leadgenaiadbuilder/1.GraphismeMenuGauche/Graphisme.css`

### ğŸ¨ Palette de Couleurs
- **Fond sidebar** : `#F1F0FC` (gris-mauve clair)
- **Header logo** : `#5E50A6` (violet)  
- **Lien actif** : `#4A2B87` (violet foncÃ©)
- **Texte normal** : `#000000` (noir)
- **Hover** : `rgba(94, 80, 166, 0.1)` (violet transparent)

### ğŸ“± Responsive Design
- **Mobile** : menu hamburger avec overlay
- **Breakpoint** : 767px
- **Largeur mobile** : 70% de l'Ã©cran

---

## ğŸ”„ FLUX DE DONNÃ‰ES

```mermaid
graph TD
    A[useCurrentUser Hook] --> B[1.Aut.Acces.Dashboard.tsx]
    B --> C[Analyse Profil Utilisateur]
    C --> D[DÃ©termination Espaces AutorisÃ©s]
    D --> E[GÃ©nÃ©ration Labels PersonnalisÃ©s]
    E --> F[Retour AutorisationDashboard]
    F --> G[NavLinks.tsx - useDashboardLinks]
    G --> H[Construction Liens Dynamiques]
    H --> I[Mapping Espace â†’ Route]
    I --> J[Layout.V2.GenAnn.tsx]
    J --> K[Rendu Interface Menu]
```

---

## ğŸ“ˆ Ã‰VOLUTIONS ET SÃ‰CURISATION FUTURE

### ğŸ›¡ï¸ Protection des Routes (Ã€ Venir)
**RÃ©fÃ©rence** : `ToDoList.SecurisationdesRoutes`

**Objectif** : ComplÃ©ter l'autorisation menu par une sÃ©curisation route
- **Actuellement** : Menu adaptÃ© selon droits utilisateur
- **Futur** : Protection cÃ´tÃ© route + redirection sÃ©curisÃ©e
- **Principe** : Double vÃ©rification (menu + route) pour sÃ©curitÃ© renforcÃ©e

### ğŸš€ FonctionnalitÃ©s en DÃ©veloppement
**Ã‰lÃ©ments placeholder Ã  activer** :
- Landing Page Ã  crÃ©er
- Bases de donnÃ©es Ã  constituer  
- Prospects Ã  relancer
- Contenus Ã  rÃ©diger
- PublicitÃ©s Ã  diffuser

---

## âœ… AVANTAGES DE L'ARCHITECTURE ACTUELLE

### ğŸ¯ SÃ©paration des ResponsabilitÃ©s
- **Hook autorisation** : logique mÃ©tier pure, rÃ©utilisable
- **NavLinks** : logique interface, spÃ©cialisÃ©e navigation
- **Maintenance facilitÃ©e** : modifications isolÃ©es par fonction

### ğŸ”§ ExtensibilitÃ©
- **Nouveaux espaces** : ajout simple dans le hook
- **Nouvelles routes** : mapping automatique
- **Personnalisation labels** : configuration centralisÃ©e

### ğŸ›¡ï¸ Robustesse
- **Gestion erreurs** : fallback sÃ©curisÃ© (pas d'autorisation)
- **Ã‰tats de chargement** : interface progressive
- **Types TypeScript** : prÃ©vention erreurs compilation

---

## ğŸ¯ CONCLUSION

Le systÃ¨me de gestion du menu gauche prÃ©sente une **architecture moderne et Ã©volutive** :

### âœ… Points Forts
- **SÃ©paration claire** : Hook autorisation + Gestionnaire navigation
- **SystÃ¨me hiÃ©rarchique** : 4 niveaux d'accÃ¨s bien dÃ©finis
- **Interface adaptative** : Menu dynamique selon profil
- **Code maintenable** : Types stricts + responsabilitÃ©s isolÃ©es

### ğŸš€ Perspectives
- **SÃ©curisation routes** : Protection double niveau (menu + route)
- **FonctionnalitÃ©s futures** : 5 Ã©lÃ©ments en dÃ©veloppement
- **Ã‰volutions possibles** : Nouveaux espaces, personnalisation avancÃ©e

Le systÃ¨me est **prÃªt pour l'extension** et constitue une base solide pour les dÃ©veloppements futurs de l'application.

---

**Date DerniÃ¨re MÃ J** : 10/09/2025  
**Fichiers ConcernÃ©s** : `1.Aut.Acces.Dashboard.tsx`, `NavLinks.tsx`, `Layout.V2.GenAnn.tsx`  
**Status** : Architecture stabilisÃ©e âœ…
