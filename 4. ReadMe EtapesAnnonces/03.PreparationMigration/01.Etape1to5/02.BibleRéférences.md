# üìò Bible de R√©f√©rence - Table `etapes_1to5` (Phase 1)

## üéØ Objectif du Document

Ce document **centralise TOUTES les r√©f√©rences exactes** pour la migration des donn√©es `localStorage` vers la table Supabase `etapes_1to5` (Phase 1 : √âtapes 1 √† 5).

**‚ö†Ô∏è R√àGLE ABSOLUE** : Tous les noms de champs, types, contraintes et mappings list√©s ici sont **LA SOURCE DE V√âRIT√â**. Aucune extrapolation, aucune invention de champs.

---

## üìã TABLE DE MATI√àRES

1. [Sch√©ma Complet Table `etapes_1to5`](#1-sch√©ma-complet-table-etapes_1to5)
2. [Mapping Complet localStorage ‚Üî Supabase](#2-mapping-complet-localstorage--supabase)
3. [Tables Li√©es & Champs Utilis√©s](#3-tables-li√©es--champs-utilis√©s)
4. [Fonctions localStorage Existantes](#4-fonctions-localstorage-existantes)
5. [Contraintes Graphiques & Formatage par Champ](#5-contraintes-graphiques--formatage-par-champ)
6. [Types TypeScript √† Cr√©er](#6-types-typescript-√†-cr√©er)
7. [R√®gles de Validation](#7-r√®gles-de-validation)
8. [Valeurs par D√©faut](#8-valeurs-par-d√©faut)
9. [Cl√©s localStorage Utilis√©es](#9-cl√©s-localstorage-utilis√©es)

---

## 1. Sch√©ma Complet Table `etapes_1to5`

### 1.1 Champs M√©tadonn√©es (Gestion Multi-Tenant & Audit)

| Nom Exact | Type PostgreSQL | Nullable | Default | Contrainte | Description |
|-----------|-----------------|----------|---------|------------|-------------|
| `project_id` | `uuid` | `NOT NULL` | `gen_random_uuid()` | `PRIMARY KEY` | Identifiant unique du projet |
| `organisation_id` | `uuid` | `NOT NULL` | ‚Äî | `FOREIGN KEY ‚Üí organisations.organisation_id` | Organisation propri√©taire |
| `user_id` | `uuid` | `NOT NULL` | ‚Äî | `FOREIGN KEY ‚Üí users.users_id` | Utilisateur cr√©ateur |
| `statut` | `text` | `NOT NULL` | `'brouillon'` | `CHECK IN ('brouillon', 'en_cours', 'complete', 'archive')` | Statut du projet |
| `validation_user` | `boolean` | `NOT NULL` | `false` | ‚Äî | Validation manuelle utilisateur |
| `step_progress` | `jsonb` | `NOT NULL` | `'{}'::jsonb` | ‚Äî | Progression des √©tapes 1-5 |
| `logs` | `jsonb` | `NOT NULL` | `'[]'::jsonb` | ‚Äî | Historique des modifications |
| `version_donnees` | `integer` | `NOT NULL` | `1` | ‚Äî | Version des donn√©es (incr√©ment√© automatiquement) |
| `created_at` | `timestamp with time zone` | `NOT NULL` | `now()` | ‚Äî | Date de cr√©ation |
| `updated_at` | `timestamp with time zone` | `NOT NULL` | `now()` | ‚Äî | Derni√®re modification (trigger) |

### 1.2 Champs M√©tier (14 champs de `PropertyData`)

| Nom Exact Supabase | Type PostgreSQL | Nullable | Default | Contrainte | Description |
|--------------------|-----------------|----------|---------|------------|-------------|
| `agency_name` | `text` | `NOT NULL` | ‚Äî | ‚Äî | Nom de l'agence immobili√®re |
| `reference` | `text` | `NOT NULL` | ‚Äî | ‚Äî | R√©f√©rence unique du bien |
| `exclusivite` | `text` | `NOT NULL` | `'Non'` | `CHECK IN ('Oui', 'Non')` | Exclusivit√© du mandat |
| `location` | `text` | `NOT NULL` | ‚Äî | ‚Äî | Localisation/Emplacement du bien |
| `property_type` | `text` | `NOT NULL` | ‚Äî | ‚Äî | Type de bien (restaurant, bar, boutique...) |
| `sale_type` | `text` | `NOT NULL` | `'√† vendre'` | `CHECK IN ('√† vendre', '√† louer')` | Type de transaction |
| `price` | `text` | `YES` | `NULL` | `CHECK: (sale_type = '√† vendre' AND price IS NOT NULL) OR sale_type = '√† louer'` | Prix FAI si vente |
| `rent_amount` | `text` | `YES` | `NULL` | `CHECK: (sale_type = '√† louer' AND rent_amount IS NOT NULL) OR sale_type = '√† vendre'` | Loyer HT/HC si location |
| `rent_periodicity` | `text` | `YES` | `NULL` | `CHECK IN ('Mensuel', 'Trimestriel', 'Annuel')` | P√©riodicit√© du loyer |
| `key_elements` | `text` | `NOT NULL` | ‚Äî | ‚Äî | Points forts & arguments commerciaux |
| `property_description` | `text` | `YES` | `NULL` | ‚Äî | Description d√©taill√©e (√âtape 2) |
| `financials` | `text` | `YES` | `NULL` | ‚Äî | D√©tails financiers (√âtape 3) |
| `details` | `text` | `YES` | `NULL` | `CHECK: (details IS NOT NULL AND hasNoDetails = false) OR (details IS NULL AND hasNoDetails = true)` | Informations compl√©mentaires (√âtape 4) |
| `has_no_details` | `boolean` | `NOT NULL` | `false` | ‚Äî | Indique si aucun d√©tail compl√©mentaire |

---

## 2. Mapping Complet localStorage ‚Üî Supabase

### 2.1 Interface `PropertyData` (localStorage) ‚Üí Table `etapes_1to5` (Supabase)

| Nom localStorage (`PropertyData`) | Nom Supabase (`etapes_1to5`) | Type TS | Type PG | Notes |
|-----------------------------------|------------------------------|---------|---------|-------|
| `agencyName` | `agency_name` | `string` | `text` | **Obligatoire** |
| `reference` | `reference` | `string` | `text` | **Obligatoire** |
| `exclusivite` | `exclusivite` | `string` | `text` | Valeurs: "Oui" / "Non" |
| `location` | `location` | `string` | `text` | **Obligatoire** |
| `propertyType` | `property_type` | `string` | `text` | **Obligatoire** |
| `saleType` | `sale_type` | `string` | `text` | Valeurs: "√† vendre" / "√† louer" |
| `price` | `price` | `string` | `text` | Obligatoire SI `sale_type = '√† vendre'` |
| `rentAmount` | `rent_amount` | `string` | `text` | Obligatoire SI `sale_type = '√† louer'` |
| `rentPeriodicity` | `rent_periodicity` | `string` | `text` | Valeurs: "Mensuel" / "Trimestriel" / "Annuel" |
| `keyElements` | `key_elements` | `string` | `text` | **Obligatoire** |
| `propertyDescription` | `property_description` | `string` | `text` | Optionnel (√âtape 2) |
| `financials` | `financials` | `string` | `text` | Optionnel (√âtape 3) |
| `details` | `details` | `string` | `text` | Optionnel (√âtape 4) |
| `hasNoDetails` | `has_no_details` | `boolean` | `boolean` | Exclusif avec `details` |

### 2.2 Champs NON Stock√©s dans localStorage (Gestion Supabase)

Ces champs **n'existent PAS** dans `PropertyData` localStorage mais seront **inject√©s automatiquement** lors de l'insertion Supabase :

- `project_id` ‚Üí G√©n√©r√© automatiquement (`gen_random_uuid()`)
- `organisation_id` ‚Üí R√©cup√©r√© via `useProfile()` ou `useImpersonation()`
- `user_id` ‚Üí R√©cup√©r√© via `useProfile()` (`profile.users_id`)
- `statut` ‚Üí Default `'brouillon'`
- `validation_user` ‚Üí Default `false`
- `step_progress` ‚Üí Default `{}`
- `logs` ‚Üí Default `[]`
- `version_donnees` ‚Üí Default `1`
- `created_at` ‚Üí Automatique (`now()`)
- `updated_at` ‚Üí Trigger automatique

---

## 3. Tables Li√©es & Champs Utilis√©s

### 3.1 Table `organisations`

**Relation** : `etapes_1to5.organisation_id` ‚Üí `organisations.organisation_id`

**Champs utilis√©s** :
- `organisation_id` (uuid) ‚Üí **FK dans `etapes_1to5`**
- `organisation_nom` (text) ‚Üí Affichage optionnel
- `organisation_statut_compte` (text) ‚Üí V√©rification acc√®s (doit √™tre `'actif'`)

### 3.2 Table `users`

**Relation** : `etapes_1to5.user_id` ‚Üí `users.users_id`

**Champs utilis√©s** :
- `users_id` (uuid) ‚Üí **FK dans `etapes_1to5`**
- `users_auth_id` (uuid) ‚Üí Via `auth.uid()`
- `users_organisation_id` (uuid) ‚Üí Correspondance avec `organisation_id`
- `users_role_systeme` (text) ‚Üí V√©rification droits (ex: `'admin_presenca'`)
- `users_nom` (text) ‚Üí Affichage optionnel
- `users_prenom` (text) ‚Üí Affichage optionnel

---

## 4. Fonctions localStorage Existantes

### 4.1 Fichier : `src/services/openai.ts`

#### **Fonction : `getPropertyDataFromStorage()`**

```typescript
export const getPropertyDataFromStorage = (): PropertyData => {
  try {
    const data = localStorage.getItem("propertyData");
    return data ? JSON.parse(data) : {};
  } catch (error) {
    console.error("Error parsing property data from storage:", error);
    return {};
  }
};
```

**Cl√© localStorage** : `"propertyData"`  
**Type retour** : `PropertyData`  
**Usage** : R√©cup√©ration des 14 champs m√©tier stock√©s

---

#### **Fonction : `updatePropertyData(newData: Partial)`**

```typescript
export const updatePropertyData = (newData: Partial): PropertyData => {
  try {
    const existingData = getPropertyDataFromStorage();
    const updatedData = { ...existingData, ...newData };
    localStorage.setItem("propertyData", JSON.stringify(updatedData));
    return updatedData;
  } catch (error) {
    console.error("Error updating property data in storage:", error);
    return newData as PropertyData;
  }
};
```

**Cl√© localStorage** : `"propertyData"`  
**Type param√®tre** : `Partial`  
**Type retour** : `PropertyData`  
**Usage** : Mise √† jour partielle des donn√©es (merge)

---

#### **Fonction : `clearPropertyData()`**

```typescript
export const clearPropertyData = (): void => {
  localStorage.removeItem("propertyData");
};
```

**Cl√© localStorage** : `"propertyData"`  
**Usage** : Suppression compl√®te des donn√©es (ex: apr√®s migration Supabase)

---


## 5. Contraintes Graphiques & Formatage par Champ

### 5.1 √âtape 1 - √âl√©ments Cl√©s

#### **Champ : `agency_name`** (Nom de l'Agence)
- **Type Input** : ``
- **Obligatoire** : ‚úÖ Oui
- **Placeholder** : "Ex: Presenca Immobilier"
- **Validation Front** :
  - Non vide (`trim()`)
  - Longueur min: 2 caract√®res
- **Formatage** : Aucun
- **Label** : "Nom de l'Agence"

---

#### **Champ : `reference`** (R√©f√©rence du Bien)
- **Type Input** : ``
- **Obligatoire** : ‚úÖ Oui
- **Placeholder** : "Ex: REF-12345"
- **Validation Front** :
  - Non vide (`trim()`)
  - Unique (v√©rification Supabase recommand√©e)
- **Formatage** : Majuscules automatiques recommand√©es
- **Label** : "R√©f√©rence du Bien"

---

#### **Champ : `exclusivite`** (Exclusivit√©)
- **Type Input** : `` (liste d√©roulante)
- **Obligatoire** : ‚úÖ Oui (default: "Non")
- **Valeurs** : `["Oui", "Non"]`
- **Formatage** : Aucun
- **Label** : "Exclusivit√©"

---

#### **Champ : `location`** (Emplacement)
- **Type Input** : ``
- **Obligatoire** : ‚úÖ Oui
- **Placeholder** : "Ex: Lyon 3√®me, rue de la R√©publique"
- **Validation Front** :
  - Non vide (`trim()`)
  - Longueur min: 3 caract√®res
- **Formatage** : Aucun
- **Label** : "Emplacement du Bien"

---

#### **Champ : `property_type`** (Type de Bien)
- **Type Input** : `` ou `` (selon design)
- **Obligatoire** : ‚úÖ Oui
- **Placeholder** : "Ex: Restaurant, Bar, Boutique"
- **Valeurs sugg√©r√©es** : Restaurant, Bar, Boutique, Bureau, Local commercial, Entrep√¥t
- **Formatage** : Premi√®re lettre majuscule
- **Label** : "Type de Bien Commercial"

---

#### **Champ : `sale_type`** (Type de Transaction)
- **Type Input** : `` (radio buttons ou liste d√©roulante)
- **Obligatoire** : ‚úÖ Oui (default: "√† vendre")
- **Valeurs** : `["√† vendre", "√† louer"]`
- **Formatage** : Aucun
- **Label** : "Type de Transaction"
- **Impact** : Affiche/masque les champs `price` ou `rent_amount`/`rent_periodicity`

---

#### **Champ : `price`** (Prix FAI)
- **Type Input** : ``
- **Obligatoire** : ‚úÖ SI `sale_type = "√† vendre"`
- **Placeholder** : "Ex: 250 000"
- **Validation Front** :
  - Nombre uniquement (regex: `/^\d+$/`)
  - Si `sale_type = "√† vendre"` ‚Üí obligatoire
- **Formatage** :
  - **Espaces milliers** : `250 000` (affichage)
  - **Symbole ‚Ç¨** : Ajout√© automatiquement (`250 000 ‚Ç¨`)
  - **Stockage** : Cha√Æne sans formatage (`"250000"`)
- **Label** : "Prix FAI (‚Ç¨)"
- **Affichage conditionnel** : Visible uniquement si `sale_type = "√† vendre"`

---

#### **Champ : `rent_amount`** (Loyer)
- **Type Input** : ``
- **Obligatoire** : ‚úÖ SI `sale_type = "√† louer"`
- **Placeholder** : "Ex: 2 500"
- **Validation Front** :
  - Nombre uniquement (regex: `/^\d+$/`)
  - Si `sale_type = "√† louer"` ‚Üí obligatoire
- **Formatage** :
  - **Espaces milliers** : `2 500` (affichage)
  - **Symbole ‚Ç¨** : Ajout√© automatiquement (`2 500 ‚Ç¨`)
  - **Stockage** : Cha√Æne sans formatage (`"2500"`)
- **Label** : "Loyer HT/HC (‚Ç¨)"
- **Affichage conditionnel** : Visible uniquement si `sale_type = "√† louer"`

---

#### **Champ : `rent_periodicity`** (P√©riodicit√© Loyer)
- **Type Input** : `` (liste d√©roulante)
- **Obligatoire** : ‚ùå Non (mais recommand√© si location)
- **Valeurs** : `["Mensuel", "Trimestriel", "Annuel"]`
- **Default** : `"Mensuel"`
- **Formatage** : Aucun
- **Label** : "P√©riodicit√© du Loyer"
- **Affichage conditionnel** : Visible uniquement si `sale_type = "√† louer"`

---

#### **Champ : `key_elements`** (Points Forts)
- **Type Input** : `` (multilignes)
- **Obligatoire** : ‚úÖ Oui
- **Placeholder** : "Ex: Emplacement strat√©gique, forte affluence, mat√©riel professionnel inclus"
- **Validation Front** :
  - Non vide (`trim()`)
  - Longueur min: 10 caract√®res
- **Formatage** : Aucun (texte libre)
- **Label** : "Points Forts & Arguments Commerciaux"
- **Hauteur** : Min 100px

---

### 5.2 √âtape 2 - Description D√©taill√©e

#### **Champ : `property_description`**
- **Type Input** : `<Textarea>` ou **√âditeur de texte enrichi** (React Quill)
- **Obligatoire** : ‚ùå Non
- **Placeholder** : "D√©crivez le bien en d√©tail..."
- **Validation Front** : Aucune (optionnel)
- **Formatage** :
  - **HTML enrichi** possible (gras, italique, listes)
  - **Stockage** : HTML ou Markdown
- **Label** : "Description D√©taill√©e du Bien"
- **Hauteur** : Min 200px

---

### 5.3 √âtape 3 - Donn√©es Financi√®res

#### **Champ : `financials`**
- **Type Input** : `<Textarea>` ou **√âditeur de texte enrichi**
- **Obligatoire** : ‚ùå Non
- **Placeholder** : "Ex: Chiffre d'affaires, charges, rentabilit√©..."
- **Validation Front** : Aucune (optionnel)
- **Formatage** :
  - **HTML enrichi** possible
  - **Symboles ‚Ç¨** automatiques recommand√©s
- **Label** : "D√©tails Financiers"
- **Hauteur** : Min 150px

---

### 5.4 √âtape 4 - Informations Compl√©mentaires

#### **Champ : `details`**
- **Type Input** : `<Textarea>` ou **√âditeur de texte enrichi**
- **Obligatoire** : ‚ùå Non (mais exclusif avec `has_no_details`)
- **Placeholder** : "Informations compl√©mentaires..."
- **Validation Front** :
  - **Exclusivit√©** : Si `has_no_details = true` ‚Üí `details` doit √™tre vide
- **Formatage** : HTML enrichi possible
- **Label** : "Informations Compl√©mentaires"
- **Hauteur** : Min 100px

---

#### **Champ : `has_no_details`**
- **Type Input** : `<Checkbox>`
- **Obligatoire** : ‚úÖ Oui (default: `false`)
- **Label** : "Aucune information compl√©mentaire"
- **Impact** :
  - Si coch√© (`true`) ‚Üí `details` devient d√©sactiv√©/vide
  - Si d√©coch√© (`false`) ‚Üí `details` devient √©ditable

---

## 6. Types TypeScript √† Cr√©er

### 6.1 Type : `Etapes1to5Data` (Complet Supabase)

```typescript
export interface Etapes1to5Data {
  // M√©tadonn√©es
  project_id: string; // uuid
  organisation_id: string; // uuid
  user_id: string; // uuid
  statut: 'brouillon' | 'en_cours' | 'complete' | 'archive';
  validation_user: boolean;
  step_progress: Record<string, any>; // jsonb
  logs: Array<any>; // jsonb
  version_donnees: number;
  created_at: string; // timestamp
  updated_at: string; // timestamp

  // Champs m√©tier (14 champs PropertyData)
  agency_name: string;
  reference: string;
  exclusivite: 'Oui' | 'Non';
  location: string;
  property_type: string;
  sale_type: '√† vendre' | '√† louer';
  price: string | null;
  rent_amount: string | null;
  rent_periodicity: 'Mensuel' | 'Trimestriel' | 'Annuel' | null;
  key_elements: string;
  property_description: string | null;
  financials: string | null;
  details: string | null;
  has_no_details: boolean;
}
```

---

### 6.2 Type : `PropertyDataLocalStorage` (Compatibilit√© localStorage)

```typescript
export interface PropertyDataLocalStorage {
  agencyName?: string;
  reference?: string;
  exclusivite?: string;
  location?: string;
  propertyType?: string;
  saleType?: string;
  price?: string;
  rentAmount?: string;
  rentPeriodicity?: string;
  keyElements?: string;
  propertyDescription?: string;
  financials?: string;
  details?: string;
  hasNoDetails?: boolean;
}
```

---

### 6.3 Type : `Etapes1to5Insert` (Insertion Supabase)

```typescript
export type Etapes1to5Insert = Omit<
  Etapes1to5Data, 
  'project_id' | 'created_at' | 'updated_at' | 'version_donnees'
>;
```

---

### 6.4 Type : `Etapes1to5Update` (Mise √† jour Supabase)

```typescript
export type Etapes1to5Update = Partial<
  Omit<Etapes1to5Data, 'project_id' | 'created_at' | 'organisation_id' | 'user_id'>
>;
```

---

## 7. R√®gles de Validation

### 7.1 Validation Front-End (Avant Soumission)

| Champ | R√®gle | Message Erreur |
|-------|-------|----------------|
| `agency_name` | Non vide + min 2 caract√®res | "Le nom de l'agence est obligatoire (min 2 caract√®res)" |
| `reference` | Non vide | "La r√©f√©rence du bien est obligatoire" |
| `location` | Non vide + min 3 caract√®res | "L'emplacement est obligatoire (min 3 caract√®res)" |
| `property_type` | Non vide | "Le type de bien est obligatoire" |
| `key_elements` | Non vide + min 10 caract√®res | "Les points forts sont obligatoires (min 10 caract√®res)" |
| `price` | Si `sale_type = "√† vendre"` ‚Üí obligatoire + nombre | "Le prix est obligatoire pour une vente" |
| `rent_amount` | Si `sale_type = "√† louer"` ‚Üí obligatoire + nombre | "Le loyer est obligatoire pour une location" |
| `details` | Si `has_no_details = false` ‚Üí optionnel | ‚Äî |
| `has_no_details` | Si `true` ‚Üí `details` doit √™tre vide | "Vous ne pouvez pas cocher cette case si vous avez saisi des d√©tails" |

---

### 7.2 Validation Back-End (CHECK Constraints PostgreSQL)

```sql
-- Validation sale_type
CHECK (sale_type IN ('√† vendre', '√† louer'))

-- Validation price conditionnelle
CHECK (
  (sale_type = '√† vendre' AND price IS NOT NULL) 
  OR 
  (sale_type = '√† louer')
)

-- Validation rent_amount conditionnelle
CHECK (
  (sale_type = '√† louer' AND rent_amount IS NOT NULL) 
  OR 
  (sale_type = '√† vendre')
)

-- Validation rent_periodicity
CHECK (rent_periodicity IN ('Mensuel', 'Trimestriel', 'Annuel') OR rent_periodicity IS NULL)

-- Validation exclusivit√©
CHECK (exclusivite IN ('Oui', 'Non'))

-- Validation details exclusif avec has_no_details
CHECK (
  (details IS NOT NULL AND has_no_details = false) 
  OR 
  (details IS NULL AND has_no_details = true)
)

-- Validation statut
CHECK (statut IN ('brouillon', 'en_cours', 'complete', 'archive'))
```

---

## 8. Valeurs par D√©faut

| Champ | Valeur Default | Trigger/Auto |
|-------|----------------|--------------|
| `project_id` | `gen_random_uuid()` | ‚úÖ Automatique |
| `statut` | `'brouillon'` | ‚úÖ Default SQL |
| `validation_user` | `false` | ‚úÖ Default SQL |
| `step_progress` | `'{}'::jsonb` | ‚úÖ Default SQL |
| `logs` | `'[]'::jsonb` | ‚úÖ Default SQL |
| `version_donnees` | `1` | ‚úÖ Default SQL |
| `created_at` | `now()` | ‚úÖ Default SQL |
| `updated_at` | `now()` | ‚úÖ Trigger `BEFORE UPDATE` |
| `exclusivite` | `'Non'` | ‚úÖ Default SQL |
| `sale_type` | `'√† vendre'` | ‚úÖ Default SQL |
| `has_no_details` | `false` | ‚úÖ Default SQL |
| `organisation_id` | ‚Äî | ‚ùå **Inject√© via hook** |
| `user_id` | ‚Äî | ‚ùå **Inject√© via hook** |

---

## 9. Cl√©s localStorage Utilis√©es

### 9.1 Cl√© : `"propertyData"` (Principal)

**Contenu** : Objet JSON contenant les 14 champs de `PropertyData`

**Structure** :
```json
{
  "agencyName": "Presenca Immobilier",
  "reference": "REF-12345",
  "exclusivite": "Oui",
  "location": "Lyon 3√®me",
  "propertyType": "Restaurant",
  "saleType": "√† vendre",
  "price": "250000",
  "rentAmount": null,
  "rentPeriodicity": null,
  "keyElements": "Emplacement strat√©gique...",
  "propertyDescription": "Description compl√®te...",
  "financials": "CA: 300 000‚Ç¨...",
  "details": "Informations compl√©mentaires...",
  "hasNoDetails": false
}
```

**Fonctions Associ√©es** :
- `getPropertyDataFromStorage()` ‚Üí Lecture
- `updatePropertyData(newData)` ‚Üí √âcriture/Mise √† jour
- `clearPropertyData()` ‚Üí Suppression

---

### 9.2 Cl√© : `"stepProgress"` (Progression √âtapes)

**Contenu** : Array des √©tapes d√©bloqu√©es

**Structure** :
```json
[1, 2, 3, 4, 5]
```

**Fonction Associ√©e** : `useStepProgress.ts`

**‚ö†Ô∏è NOTE** : Cette cl√© sera **synchronis√©e** avec le champ `step_progress` de `etapes_1to5` (JSONB).

---

### 9.3 Cl√© : `"session_start_time"` (Timer Session)

**Contenu** : Timestamp de d√©marrage session

**Structure** :
```json
1735689600000
```

**Fonction Associ√©e** : `useSgaForm.ts`

**‚ö†Ô∏è NOTE** : Cette cl√© **ne sera PAS migr√©e** dans Supabase (usage temporaire front-end).

---

## 10. R√©capitulatif Mapping CamelCase ‚Üî Snake_Case

| CamelCase (TS/Front) | Snake_Case (SQL/Supabase) |
|----------------------|---------------------------|
| `agencyName` | `agency_name` |
| `propertyType` | `property_type` |
| `saleType` | `sale_type` |
| `rentAmount` | `rent_amount` |
| `rentPeriodicity` | `rent_periodicity` |
| `keyElements` | `key_elements` |
| `propertyDescription` | `property_description` |
| `hasNoDetails` | `has_no_details` |
| `organisationId` | `organisation_id` |
| `userId` | `user_id` |
| `projectId` | `project_id` |
| `validationUser` | `validation_user` |
| `stepProgress` | `step_progress` |
| `versionDonnees` | `version_donnees` |
| `createdAt` | `created_at` |
| `updatedAt` | `updated_at` |

---

## üìå Fin de la Bible de R√©f√©rence

**Document Version** : 1.0  
**Date** : 2025-01-28  
**Auteur** : Syst√®me LeadGenAI AdBuilder

---

**‚ö†Ô∏è R√àGLE ABSOLUE** : Ce document est **LA SOURCE DE V√âRIT√â** pour Phase 1. Aucun champ ne doit √™tre ajout√©, renomm√© ou supprim√© sans mise √† jour de cette Bible.

---


