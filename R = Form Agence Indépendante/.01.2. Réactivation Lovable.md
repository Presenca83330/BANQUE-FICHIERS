
----
## 1/ Présentation
Bonjour 
- Tu es un expert en Ia no code et intégration supabese.
- Tu maitrises parfaitement les environnement Saas, les meilleures logiciels et ia
- Tu m 'accompagnes dans la mise à jour de mon formulaire de gestion de mise jour de compte.
- Tu es un expert qui applique les directives avec rigueur, précision, tu es méticuleux et
- Tu ne modifies pas ce qu on ne t a pas demandé
- Tu es un vrai expert professionnel
Je vais t'expliquer dans le chat suivant ce que nous allons faire ensemble.
---
## 2/ Docs Stratégiques
J'aimerais que tu aies une vision complète de mon application commence par lire les documents suivants : 
- public/1. Documents Stratégiques/01. Présentation LeadGenAi.md
- public/1. Documents Stratégiques/02. Présentation Structure LeadGenAi.md
- public/1. Documents Stratégiques/03. Logique Organisations.md
- public/1. Documents Stratégiques/04. Relations Business entre Tables.md
- public/1. Documents Stratégiques/05. Relations Users Utilisateurs.md
- public/1. Documents Stratégiques/06. Référence des Hooks Stratégiques.md
- public/1. Documents Stratégiques/07.1. Stratégie - Gestion des informations partagées entre Réseau et Réseau Direction.md
- public/1. Documents Stratégiques/08. Gestion du Menu Gauche.md
- public/1. Documents Stratégiques/09. Structure - Organisation | Client_id.md
- public/1. Documents Stratégiques/10. Structure des Tables de Connexion & Règles Collaborateurs.md
- Ces fichiers te permettront de te souvenir de mon application, des rapports entre les tables, des notions d'organisation, utilisateurs, client_id, etc qui sont propres à mon application.
- Quand tu auras fini, je te donnerai d'autres ressources à lire, ne fais pas autre chose avant ma commande suivante il faut analyser les fichiers dans l'ordre
---
## 3/ Présentation du Formulaire de création table réseau
Parfait
- On travaille en ce moment sur un espace qui va me permettre en tant qu'administrateur admin_presenca de créer des tables (creation) et de les mettre à jour (gestion)
- Il y a 3 parties dans ce formulaire : une partie accueil, une partie création et une partie mise à jour appelée gestion
- On a finalisé le formulaire des tables réseau qui fonctionne parfaitement.
- Je vais te donner tous les éléments pour que tu comprennes bien la structure
1/ Connaissance des tables
- Analyse ce documnet préparatoire, il permet de connaitre parfaitement les tables concernées et ne commettre aucune erreur de maping
- Analyse ce fichier : public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/.TablesReferenceReseau.ts
2/ Connaissance du formulaire de création
- Analyse les documents suivants, ils te permettront de connaitre parfaitement le fonctionnement de ce formulaire, de la fonction service role key, des fonctions
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/01.StructureCreationFormAccueil.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/02.StructuredesFormCreationReseau.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/03.Analyse du Fonctionnement Formulaire Création Réseau.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/04.AnalyseEdgeFunctionSERVICE_ROLE_KEY.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/05.Architecture-SERVICE_ROLE_KEY-GUIDE.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/06.GUIDE-DataData-EdgeFunctions.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/07.CHECKLIST-BIBLE-FormulairesCreationGestion.md
3/ Connaissance du formulaire de gestion 
- Analyse les documents suivants, ils te permettront la stratégie de ce formulaire et sourtout toute la structure très technique et toutes les fonctions, hooks, sql
- public/3. ReadMe FormPresenca/01.FormReseau/2.FormGestion/01.StrategieFormGestion.md
- public/3. ReadMe FormPresenca/01.FormReseau/2.FormGestion/02.CodesFichiersFormGestion.md
4/ Connaissance du formulaire de creation et de gestion 
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/01.ReadMe.md
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/02.1.CadrageInitialTable.md
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/02.2.ExempleTablesReferenceReseau.ts
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/03.InstructionsCompletes.md
- As tu bien analysé et compris le fonctionnement de ce formulaire table réseau, création et gestion ?
---
## 4/ Analyse de la bible du formulaire de création 
- Nous avons travaillé sur la conception d'une bible qui nous permette de reproduire simplement les 2 parties de la structure du formulaire reseau : la partie creation et la partie gestion
- Mon objectif est de partir de tous les fichiers utilisés et de les commenter dans un langage simple pour éviter toute erreur et aller vite
- Nous avons créé une bible de la partie creation du formulaire réseau
- Analyse le fichier : public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/02.TemplateFormCreation.md
  - J'ai repris tous les fichiers utilisés pour cette partie création et ils sont présentés dans un ordre de création progressif
  - Pour chaque fichier, il y a :
  	- En 1er. Le code source utilisé dans le formulaire table reseau
  	- En 2ème. L'explication simple pour reproduire cette structure parfaite et l'adapter au formulaire de la nouvelle table que l'on souhaite créer
  - il y a 7 étapes
  	- Etape 1 : Conception des Types TypeScript
  	- Étape 2 : Conception de la Fonction SQL de Création Complète
  	- Étape 3 : Conception de la Edge Function de Création
  	- Étape 4 : Mise à jour config.toml
  	- Étape 5 : Création du Hook Création
  	- Étape 6 : Composant Formulaire Principal
  	- Étape 7 : Composant d'Affichage du Succès
  - Analyse-les, et tu verras comment en suivant à la lettre ces directives nous avons pu crééer un formulaire création parfait pour la table Agence Indépendante.
  	- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.02.CodesFichiersPrepatoiresFormCreationAgenceIndependante.md
- Comprends-tu le process ?
---
## 5/ Analyse de la bible du formulaire de gestion
- Nous avons également créé une bible de la partie gestion du formulaire réseau
- Analyse le fichier : public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
  - J'ai repris tous les fichiers utilisés pour cette partie gestion et ils sont présentés dans un ordre de création progressif
  - Pour chaque fichier, il y a :
  	- En 1er. Le code source utilisé dans le formulaire table reseau
  	- En 2ème. L'explication simple pour reproduire cette structure parfaite et l'adapter au formulaire de la nouvelle table que l'on souhaite créer
  - il y a 12 étapes
	- ÉTAPE 1 : Types TypeScript
	- ÉTAPE 2 : MIGRATION SQL 1 - Fonctions + Trigger
	- ÉTAPE 3 : Edge Function - Liste (Selector)
	- ÉTAPE 4 : Composant Selector
	- ÉTAPE 5 : Edge Function - Données Complètes
	- ÉTAPE 6 : Hook - FormData
	- ÉTAPE 7 : Edge Function - Update
	- ÉTAPE 8 : Hook - Integrations
	- ÉTAPE 9 : MIGRATION SQL 2 - RLS Storage
	- ÉTAPE 10 : Edge Function - Fichiers (Storage)
	- ÉTAPE 11 : Composant Formulaire Principal
	- ÉTAPE 12 : Configuration finale

  - Analyse-les, et je te donnerai ma directive dans le chat suivant
---
## 6/ Ce que nous allons faire
- A partir de ces directives, public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
- nous avons conçu les codes préparatoires pour la table agence indépendante, ils ont été préparés dans ce fichier
- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.03.CodesFichiersPrepatoiresFormGestionAgenceIndependante.md
- Il y a toutefois qq modifications liées à la spécificités de la table Agence Indépendante par rapport à la table reseau
	- 1ere modification :
		- Comme pour réseau où les tables reseau et reseau_direction étaient liées
		- Pour la table agence_independante, les tables agence_independante et agence_independante_responsable etaient liées
	- 2ème modification
		- Les champs prévus, titres, préholders avaient été définis par admin_presenca pour
		- les voici : Nom de l'Agence Indépendante, Identité Commerciale de l'Agence Indépendante, Adresse, Code Postal, Ville, Siret, Téléphone. Responsable Agence Indépendante,  Email. Responsable Agence Indépendante.
	- 3ème modification
		- POur la table réseau, il y avait 3 intégrations (Zoho, Open AI, Brevo)
		- POur la table Agence Indépendante, il y en a 6(Zoho, Open Ai, Brevo, Linkedin, Facebook, Instagram)
		- Pour ces nouvelles intégrations il fallait faire exactement la meme chose que pour Zoho, open ai et Brevo sans apporter de mofication et d'optimation
		- Il fallait simplement personnaliser les intégrations
		- Et Faire attention car des fichiers soient adaptés à ces nouvelles intégrations comme : Etapte 1/5/8/11 par exemple
	- 4ème modification
		- POur la table réseau, il y avait 3 onglets ( Général, Intégrations, Fichiers)
		- POur la table agence indépendante, il en faudra 4 (Général, Abonnement, Intégrations, Fichiers)
		- POur ces fichiers préparatoires, il fallait conserver la fonction prévue dans le graphisme pour accéder à l'onglet Abonnement et laisser les champs actuels inactifs cad sans liens avec supabase, nous ferons ça dans un second temps.
  - Ensuite j'ai intégré les fichiers Etapes 1 à 12 (à l'exception des fichiers des étapes migration étape 2 et etape 9)
  - Il faudrait maintenant lancer les migrations sql pour voir si tout fonctionne et j ai besoin de toi pour le faire
  - Par contre, j ai une erreur est -ce lié à la non intégration des migrations sql de l'étape finale où est-ce qu il y a une autre erreur
  - Peux tu analyser
----


- Je souhaite maintenant les développer et les intégrer dans mon application
- Au préalable, j'aimerais que tu fasses une dernière vérification fichier par fichier, code par code des fichiers des 12 etapes
- Tu vas analyser fichier etape par fichier etape, ligne par ligne
	- -> Directive 1 :
		- Analyse attentivement le fichier source de l'Etape et les directives strictes qui sont associées dans
		- public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
	- -> Directive 2 :
		- Analyse attentivement le fichier préparatoire de l'Etape présenté dans
		- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.03.CodesFichiersPrepatoiresFormGestionAgenceIndependante.md
	- -> Directive 3 :
		- Contrôle que le fichier préparatoire de l'étape :
		- Applique impérativement à la lettre les directives strictes de l'Etape définies dans : public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
		- Respecte impérativement les tables actuelles dans Supabase, les champs, les noms,
		- Respecte impérativement les tables référence prévues dans src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts.
		- N'a pas optimisé ou amémioré le code du formulaire gestion de la table réseau ce qui est strictement interdit
		- Si besoin s'il a été personnalisé pour permettre les nouvelles intégrations (Linkedin, Facebook, Instagram) en respectant le maping et le nomming actuel dans supabase et src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts
		- N'a pas commis d'erreur de nomming et d'incohérence de noms (ex. agenceIndep/agence_independante) qui pourraient créer des bugs lors de l'implémentation

A toi
----
---
-
-
-




- Je souhaite faire comme pour le formulaire de création,
- Hier nous avons commencé à travailler sur les fichiers préparatoires du formulaire de gestion
- Voici le document
	- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.03.CodesFichiersPrepatoiresFormGestionAgenceIndependante.md
- Je te rappelle l'objectif de ce document :
	- Appliquer et personnalisér les codes prévus et qui fonctionnent pour réseau sans aucune modification
	- Il y a toutefois qq modifications liées à la spécificités de la table Agence Indépendante
		- 1ere modification :
			- Comme pour réseau où les tables reseau et reseau_direction étaient liées
			- Pour la table agence_independante, les tables agence_independante et agence_independante_responsable seront liées
		- 2ème modification
			- Les champs informations générales, les champs, titres, préholders ont été définis par admin_presenca et ne doivent pas être modifiés
			- les voici : Nom de l'Agence Indépendante, Identité Commerciale de l'Agence Indépendante, Adresse, Code Postal, Ville, Siret, Téléphone. Responsable Agence Indépendante,  Email. Responsable Agence Indépendante.
		- 3ème modification
			- POur la table réseau, il y avait 3 intégrations (Zoho, Open AI, Brevo)
			- POur la table Agence Indépendante, il y en  a 6(Zoho, Open Ai, Brevo, Linkedin, Facebook, Instagram)
			- Pour ces nouvelles intégrations il fallait faire exactement la meme chose que pour Zoho, open ai et Brevo sans apporter de mofication et d'optimation
			- Il fallait simplement personnaliser les intégrations
  			- Et Faire attention car des fichiers soient adaptés à ces nouvelles intégrations comme : Etapte 1/5/8/11 par exemple
		- 4ème modification
			- POur la table réseau, il y avait 3 onglets ( Général, Intégrations, Fichiers)
			- POur la table agence indépendante, il en faudra 4 (Général, Abonnement, Intégrations, Fichiers)
			- POur ces fichiers préparatoires, il fallait conserver la fonction prévue dans le graphisme pour accéder à l'onglet Abonnement et laisser les champs actuels inactifs cad sans liens avec supabase, nous ferons ça dans un second temps.
- Est-ce clair?
- Lis ces fichiers et je te donnerai ma directive dans le chat suivant
---
## 7/ Vérification d'expert
Parfait, merci
-  Tu vas analyser un par un chaque fichier étape code par code ligne par ligne
-  Tu dois contrôler que les fichiers préparatoires de
	-  src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.03.CodesFichiersPrepatoiresFormGestionAgenceIndependante.md
-  Tu dois vérifier et contrôler que les fichiers préparatoires des 12 étapes respectent impérativemnent ces directives 
	- Appliquer impérativement à la lettre les directives strictes de  : public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
	- Respecter impérativement les tables actuelles dans Supabase, les champs, les noms etc
	- Respecter impérativement les tables référence prévues dans src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts.
	- Interdiction totale d'optimiser ou d'améliorer le code de la table réseau définis dans public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md et qui fonctionne parfaitemen,t
	- Veiller à regarder si le fichier a été personnalisé pour permettre les nouvelles intégrations (Linkedin, Facebook, Instagram) en respectant le maping et le nomming actuel dans supabase et src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts
 - Vérifier s'il n'y a pas eu d'erreurs entre les fichiers de nomming (ex. agenceIndep/agence_independante) qui pourraient créer des bugs lors de l'implémentation
- A toi
---
---
## 8/ Vérification d'expert fichier par fichier
- Parfait, merci
- - -> Tu vas analyser le fichier Etape ->n°
  - - -> Analyse en détail code par code, ligne par ligne

-> Action 1 :
- Analyse attentivement le fichier source de l'Etape et les directives strictes qui sont associées dans
- public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md

-> Action 2 :
- Analyse attentivement le fichier préparatoire de l'Etape présenté dans
- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.03.CodesFichiersPrepatoiresFormGestionAgenceIndependante.md

-> Action 3 :
- Contrôle que le fichier préparatoire :
- Applique impérativement à la lettre les directives strictes de l'Etape définies dans : public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
- Respecte impérativement les tables actuelles dans Supabase, les champs, les noms,
- Respecte impérativement les tables référence prévues dans src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts.
- N'a pas optimisé ou amémioré le code du formulaire gestion de la table réseau ce qui est strictement interdit
- Si besoin s'il a été personnalisé pour permettre les nouvelles intégrations (Linkedin, Facebook, Instagram) en respectant le maping et le nomming actuel dans supabase et src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.01.TablesReferenceAgenceIndependante.ts
- N'a pas commis d'erreur de nomming et d'incohérence de noms (ex. agenceIndep/agence_independante) qui pourraient créer des bugs lors de l'implémentation

- ->> A toi
---
---
-
---
-
-

- Voici un exemple

---
## **Explications. Comment concevoir une edge function création pour une table **
---
### Sous-Étape 1 : Imports et Configuration Supabase Admin
- *Objectif* : Initialiser le client Supabase avec SERVICE_ROLE_KEY pour bypasser RLS
- *Directives* :
	- CONSERVER tel quel les imports (utiliser l'URL ESM pour Deno)
 	- CONSERVER la configuration supabaseAdmin avec les options d'auth désactivées
```typescript
interface ReseauCreationData {   // ← À PERSONNALISER
  nomReseau: string          // ← À PERSONNALISER
  adresse: string;
  codePostal: string;
  ville: string;
  siret: string;
  nomResponsable: string;
  prenomResponsable: string;
  emailResponsable: string;
  telephoneResponsable: string;
}
```
- Est-ce Clair ?
---
----
---
## **Explications. xxxxx  **
---
### Sous-Étape 1 :  xxxxx
- *Objectif* : xxxxx
- *Directives* :
	- xxxxx
 	- xxxx
```typescript
xxxx   // ← À PERSONNALISER
xxxx
xxxxx
  xxx         // ← À PERSONNALISER

}
```
- Est-ce Clair ?
-
-


## 5. Next step 
- Parfait, à partir de ces informations cruciales tu as codé tous les fichiers pour préparer le formulaire de table agence indépendante
- On a donc décidé de commencer par le formulaire creation et tu as conçu tous les codes préparatoires, ils sont ici :
- src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante/.02.CodesFichiersPrepatoiresFormCreationAgenceIndependante.md
- j'ai intégré tous les codes avec Github
- Vas y vérifie et je te pose ma question après
---
## 6. Go
- Tout est en place
- Il ne nous reste plus qu'à lancer la sql
- Qu'en penses tu ?
---


---
## Rappel des documents utilisés pour formulaire table réseau

1/ Connaissance des tables
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/.TablesReferenceReseau.ts

2/ Connaissance du formulaire de création
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/01.StructureCreationFormAccueil.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/02.StructuredesFormCreationReseau.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/03.Analyse du Fonctionnement Formulaire Création Réseau.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/04.AnalyseEdgeFunctionSERVICE_ROLE_KEY.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/05.Architecture-SERVICE_ROLE_KEY-GUIDE.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/06.GUIDE-DataData-EdgeFunctions.md
- public/3. ReadMe FormPresenca/01.FormReseau/1.FormCreateur/07.CHECKLIST-BIBLE-FormulairesCreationGestion.md

3/ Connaissance du formulaire de gestion 
- public/3. ReadMe FormPresenca/01.FormReseau/2.FormGestion/01.StrategieFormGestion.md
- public/3. ReadMe FormPresenca/01.FormReseau/2.FormGestion/02.CodesFichiersFormGestion.md

4/ Connaissance du formulaire de creation et de gestion 
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/01.ReadMe.md
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/02.1.CadrageInitialTable.md
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/02.2.ExempleTablesReferenceReseau.ts
- public/3. ReadMe FormPresenca/01.FormReseau/3.FormCreateurGestion/03.InstructionsCompletes.md
----
