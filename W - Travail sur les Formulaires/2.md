# PENSE-BÃŠTE - FormReseauGestion 

## Ã‰tat actuel du dÃ©veloppement

**Contexte** : DÃ©veloppement du formulaire de gestion des rÃ©seaux pour les administrateurs PRESENCA
**Fichier principal** : `3.FormReseauGestion.tsx`
**Onglet en cours** : **GÃ‰NÃ‰RAL**

## Architecture des champs - Onglet GÃ©nÃ©ral

### âœ… Champs rÃ©seau pur (OK Ã  modifier ici)
Ces champs relÃ¨vent de l'entitÃ© RÃ©seau (organisation/business) :

- `reseau_nom` â†’ Nom du rÃ©seau 
- `reseau_identite_commerciale` â†’ IdentitÃ© commerciale du RÃ©seau
- `reseau_adresse` â†’ Adresse. SiÃ¨ge RÃ©seau
- `reseau_code_postal` â†’ Code Postal. SiÃ¨ge RÃ©seau
- `reseau_ville` â†’ Ville. SiÃ¨ge RÃ©seau
- `reseau_siret` â†’ NÂ° du Siret du RÃ©seau

ğŸ‘‰ **Action** : Je peux les modifier directement dans Formulaire RÃ©seau.

### âš ï¸ Champs liÃ©s au responsable de rÃ©seau (PAS ICI)
Ces champs concernent ReseauDirection :

- `reseau_telephone` â†’ TÃ©l. ReseauDirection
- `reseau_email` â†’ Email. ReseauDirection 

ğŸ‘‰ **Restriction** : Ces champs ne doivent pas Ãªtre modifiÃ©s dans Formulaire RÃ©seau car ils concernent ReseauDirection. Ils seront gÃ©rÃ©s dans le futur formulaire RÃ©seau Direction.

### Message pour les champs bloquÃ©s
```
"Ce champ correspond aux informations du ReseauDirection.
Ã€ modifier dans le formulaire RÃ‰SEAU Direction"
```

## Prochaines Ã©tapes
- ImplÃ©menter les champs modifiables dans l'onglet GÃ©nÃ©ral
- Bloquer les champs telephone et email avec message explicatif
- Passer aux autres onglets (IntÃ©grations, Fichiers)

---

## ONGLET INTÃ‰GRATIONS - Architecture validÃ©e âœ…

**Statut** : Analyse terminÃ©e - Ready pour implÃ©mentation

### ğŸ”— Architecture des champs d'intÃ©gration

**Principe** : 4 tables impliquÃ©es
- 1 table principale `reseau` (liens FK)
- 3 tables spÃ©cialisÃ©es `brevo_connexion`, `zoho_connexion`, `openai_connexion`

### ğŸ“‹ Champs Ã  implÃ©menter dans le formulaire

#### **1. BREVO (table: brevo_connexion)**
- `brevo_api_key` â†’ ClÃ© API Brevo â­
- `brevo_email_compte` â†’ Email du compte Brevo â­  
- `brevo_nom_compte` â†’ Nom du compte Brevo â­

#### **2. ZOHO (table: zoho_connexion)**
- `zoho_api_key` â†’ ClÃ© API Zoho â­
- `zoho_email_compte` â†’ Email du compte Zoho â­
- `zoho_nom_compte` â†’ Nom du compte Zoho â­

#### **3. OPENAI (table: openai_connexion)**
- `openai_api_key` â†’ ClÃ© API OpenAI â­
- `openai_email_compte` â†’ Email du compte OpenAI â­

### âœ… Validation technique
- **Tous les ID vÃ©rifiÃ©s** âœ… (correspondent aux colonnes Supabase)
- **Champs obligatoires identifiÃ©s** âœ… (selon contraintes NOT NULL)
- **Architecture multi-tables validÃ©e** âœ…

### ğŸ¯ Prochaine Ã©tape pour l'onglet IntÃ©grations
- CrÃ©er les composants de formulaire pour chaque intÃ©gration
- GÃ©rer les relations FK depuis table `reseau` vers tables de connexions
- ImplÃ©menter la validation des champs obligatoires par intÃ©gration

---

## ONGLET FICHIER - Architecture Storage validÃ©e âœ…

**Statut** : Analyse terminÃ©e - Architecture dÃ©finie - Ready pour implÃ©mentation

### ğŸ—‚ï¸ ProblÃ©matique Storage identifiÃ©e

**Situation analysÃ©e** :
- âœ… **Champ table** : `reseau_logo` (text) existe dans table `reseau`
- âŒ **Storage bucket** : Aucun bucket configurÃ© dans Supabase
- âŒ **Policies RLS** : Pas de policies storage dÃ©finies

**Besoin** : Upload et stockage sÃ©curisÃ© des fichiers (logos, documents) par rÃ©seau

### ğŸ—ï¸ Architecture Storage dÃ©finie - IMPÃ‰RATIVE

#### **Bucket unique multi-tenant** (approche validÃ©e)
- **Nom bucket** : `bucket-table-reseau`
- **Organisation** : Isolation par UUID rÃ©seau + sous-dossiers typÃ©s
- **SÃ©curitÃ©** : RLS policies pour isolation parfaite par reseau_id

#### **Structure de dossiers OBLIGATOIRE** ğŸ“
```
bucket-table-reseau/
â””â”€â”€ reseau-{uuid}/                    â† UUID = reseau_id exact
    â”œâ”€â”€ 1-logos/                      â† Dossier logos
    â”‚   â”œâ”€â”€ logo-principal.png
    â”‚   â””â”€â”€ logo-alternatif.png
    â”œâ”€â”€ 2-documents-institutionnels/  â† Dossier documents
    â”‚   â”œâ”€â”€ presentation.pdf
    â”‚   â”œâ”€â”€ reglement.pdf
    â”‚   â””â”€â”€ statuts.pdf
    â””â”€â”€ 3-charte-graphique/           â† Extensible futur
        â””â”€â”€ charte-couleurs.pdf
```

#### **Exemples de chemins complets**
```
bucket-table-reseau/reseau-550e8400-e29b-41d4-a716-446655440000/1-logos/logo.png
bucket-table-reseau/reseau-550e8400-e29b-41d4-a716-446655440000/2-documents-institutionnels/presentation.pdf
```

### ğŸ›¡ï¸ SÃ©curitÃ© RLS Storage - Isolation garantie

**Principe** : Chaque rÃ©seau voit UNIQUEMENT ses fichiers
- **Protection** : RLS policies sur storage.objects
- **Filtrage** : Par reseau_id (chaque dossier est nommÃ© reseau-{uuid})
- **Pattern** : `name LIKE 'reseau-' || reseau_id::text || '/%'`

**Garantie zÃ©ro mÃ©lange** : MÃªme niveau de sÃ©curitÃ© que les tables

### ğŸ“‹ Champs formulaire - Mapping dÃ©fini

#### **CHAMP 1 : Logo principal** 
- **Type formulaire** : Upload fichier unique (image)
- **Table destination** : `reseau_logo` (text)
- **Contenu stockÃ©** : URL/chemin complet du fichier
- **Format** : `bucket-table-reseau/reseau-{uuid}/1-logos/nom-fichier.ext`

#### **CHAMP 2 : Documents institutionnels**
- **Type formulaire** : Upload multiple fichiers (PDF, DOC)
- **Table destination** : `reseau_ressources` (ARRAY)
- **Contenu stockÃ©** : Array des URLs/chemins
- **Format** : 
```json
[
  "bucket-table-reseau/reseau-{uuid}/2-documents-institutionnels/presentation.pdf",
  "bucket-table-reseau/reseau-{uuid}/2-documents-institutionnels/reglement.pdf"
]
```

### ğŸ”„ Workflow d'upload dÃ©fini

1. **Ã‰tape 1** : User sÃ©lectionne fichier(s) dans formulaire
2. **Ã‰tape 2** : Upload vers bucket storage (avec path calculÃ©)
3. **Ã‰tape 3** : Storage retourne URL(s) du/des fichier(s)
4. **Ã‰tape 4** : Sauvegarde URL(s) dans champ(s) table `reseau`
5. **Ã‰tape 5** : Affichage via URL(s) stockÃ©e(s)

### âš™ï¸ Ce qui doit Ãªtre crÃ©Ã© AVANT codage

1. **Bucket storage** `bucket-table-reseau`
2. **Policies RLS** pour isolation par reseau_id
3. **Policies upload** pour admins PRESENCA

### ğŸ¯ Prochaines Ã©tapes onglet Fichier
- CrÃ©er le bucket et policies storage
- ImplÃ©menter composant upload logo (champ unique)
- ImplÃ©menter composant upload documents (multi-fichiers)
- GÃ©rer preview/suppression des fichiers uploadÃ©s

---

## âœ… Ã‰TAPE 1 - SÃ‰LECTION RÃ‰SEAU VALIDÃ‰E

**Statut** : Option A validÃ©e - Architecture complÃ¨te dÃ©finie - Ready pour implÃ©mentation

### ğŸ¯ Solution choisie : Dropdown avec recherche intÃ©grÃ©e

**DÃ©cision validÃ©e** : Option A (Dropdown avec recherche) vs Option B (Champ de recherche sÃ©parÃ©)

#### ğŸ¨ Comportement visuel dÃ©fini

**Ã‰tat fermÃ©** :
- Dropdown standard avec placeholder "SÃ©lectionner un rÃ©seau..."
- IcÃ´ne chevron down Ã  droite
- Design cohÃ©rent avec le design system (bg-background, border-border)

**Ã‰tat ouvert** :
- Liste dÃ©roulante avec barre de recherche en haut
- Zone de recherche : input avec placeholder "Rechercher un rÃ©seau..."
- Liste filtrÃ©e en temps rÃ©el selon la saisie
- Scroll si plus de 8-10 rÃ©sultats
- Background solid (bg-popover) avec z-index Ã©levÃ© pour Ã©viter transparence

**Ã‰tat sÃ©lectionnÃ©** :
- Dropdown se ferme automatiquement
- Affichage du nom du rÃ©seau sÃ©lectionnÃ© dans le champ
- DÃ©clenche automatiquement le chargement des donnÃ©es (Ã‰tape 2)

#### ğŸ“‹ Contenu de chaque item dans la liste

**Format d'affichage simplifiÃ©** :
```
{reseau_nom}
```

**DonnÃ©es source** : 
- Table principale : `reseau`
- Champs requis : `reseau_nom`

#### ğŸ” FonctionnalitÃ© de recherche

**Comportement** :
- Recherche en temps rÃ©el (pas de bouton rechercher)
- Filtrage sur : `reseau_nom`
- Recherche insensible Ã  la casse
- Debouncing 300ms pour optimiser les requÃªtes

**RequÃªte Supabase** :
```javascript
const { data } = await supabase
  .from('reseau')
  .select('reseau_id, reseau_nom')
  .eq('reseau_statut', 'actif')
  .order('reseau_nom');
```

---

const generalData = {  reseau_nom,  reseau_identite_commerciale,  reseau_adresse,  reseau_code_postal,  reseau_ville,  reseau_siret,  // BLOQUÃ‰S (ReseauDirection):  reseau_telephone, // â†’ Affichage seul avec message  reseau_email      // â†’ Affichage seul avec message}```**ONGLET INTÃ‰GRATIONS (tables: brevo_connexion, zoho_connexion, openai_connexion)** :```javascriptconst integrationsData = {  brevo: {    brevo_api_key,    brevo_email_compte,    brevo_nom_compte  },  zoho: {    zoho_api_key,    zoho_email_compte,    zoho_nom_compte  },  openai: {    openai_api_key,    openai_email_compte  }}```**ONGLET FICHIERS (table: reseau)** :```javascriptconst filesData = {  reseau_logo,        // â†’ URL du logo  reseau_ressources   // â†’ Array des URLs documents}```#### âš™ï¸ Hook de gestion des donnÃ©es**Nom** : `useReseauFormData`**ResponsabilitÃ©s** :- Chargement des donnÃ©es complÃ¨tes du rÃ©seau sÃ©lectionnÃ©- Gestion des Ã©tats d'Ã©dition par section- Sauvegarde des modifications- Reset en cas d'annulation**Interface** :```typescriptinterface UseReseauFormDataReturn {  // DonnÃ©es  reseauData: ReseauCompleteData | null;  isLoading: boolean;    // Actions  loadReseauData: (reseauId: string) => Promise<void>;  updateField: (section: string, field: string, value: any) => void;    // Ã‰tats d'Ã©dition  editingStates: {    general: boolean;    integrations: boolean;    files: boolean;  };  toggleEditMode: (section: string) => void;    // Sauvegarde  saveSection: (section: string) => Promise<void>;  cancelEdit: (section: string) => void;}```#### ğŸ® IntÃ©gration GraphBoutonModifier**Composant existant** : `GraphBoutonModifier.tsx` (dÃ©jÃ  fonctionnel)**Usage dans chaque section** :```tsx// ONGLET GÃ‰NÃ‰RAL<GraphBoutonModifier  onEditingChange={(isEditing) => toggleEditMode('general')}  onSave={() => saveSection('general')}  onCancel={() => cancelEdit('general')}  isLoading={isLoadingSave}/>// ONGLET INTÃ‰GRATIONS<GraphBoutonModifier  onEditingChange={(isEditing) => toggleEditMode('integrations')}  onSave={() => saveSection('integrations')}  onCancel={() => cancelEdit('integrations')}  isLoading={isLoadingSave}/>// ONGLET FICHIERS<GraphBoutonModifier  onEditingChange={(isEditing) => toggleEditMode('files')}  onSave={() => saveSection('files')}  onCancel={() => cancelEdit('files')}  isLoading={isLoadingSave}/>```**ContrÃ´le des champs** :```tsx// Exemple pour onglet GÃ©nÃ©ral<Input  value={reseauData?.reseau_nom || ''}  onChange={(e) => updateField('general', 'reseau_nom', e.target.value)}  disabled={!editingStates.general}/>```#### ğŸ”„ RequÃªte de chargement complÃ¨te**Query Supabase obligatoire** :```javascriptconst loadCompleteReseauData = async (reseauId) => {  const { data, error } = await supabase    .from('reseau')    .select(`      *,      organisations(*),      brevo_connexion(*),      zoho_connexion(*),      openai_connexion(*)    `)    .eq('reseau_id', reseauId)    .single();      return data;};```#### ğŸ“± UX Messages**Champs bloquÃ©s (telephone/email)** :```tsx<div className="relative">  <Input value={reseauData?.reseau_telephone} disabled />  <p className="text-sm text-muted-foreground mt-1">    Ce champ correspond aux informations du ReseauDirection.    Ã€ modifier dans le formulaire RÃ‰SEAU Direction  </p></div>```**Ã‰tats de chargement** :- Spinner pendant `loadReseauData`- Skeleton des champs pendant chargement- Toast de confirmation aprÃ¨s sauvegarde### ğŸ¯ Ordre d'implÃ©mentation recommandÃ©1. **Hook useReseauFormData** â†’ Gestion Ã©tat/donnÃ©es2. **Composant DropdownReseauSelector** â†’ SÃ©lection rÃ©seau  3. **Integration onglet GÃ©nÃ©ral** â†’ Premier cas d'usage4. **Integration onglets IntÃ©grations + Fichiers** â†’ Completion5. **Tests et ajustements UX** â†’ FinalisationğŸ”„ Workflow complet dÃ©fini (inchangÃ©)---## ğŸ“Š ANALYSE ARCHITECTURE COMPLÃˆTE - FormReseauGestion**Date d'analyse** : Phase d'Ã©tude architecture**Objectif** : Estimation prÃ©cise des fichiers, hooks et composants nÃ©cessaires### ğŸ¯ SYNTHÃˆSE QUANTITATIVE**En plus du fichier principal** `FormReseauGestion.tsx` (qui sera modifiÃ©), voici l'architecture complÃ¨te :#### ğŸ“ **HOOKS STRATÃ‰GIQUES** â†’ 6 nouveaux fichiers```src/components/HOOKS-STRATEGIQUE/6.HOOKS-GestionCompteAdminPresenca/1.Reseau/â”œâ”€â”€ useReseauFormData.ts           â†’ Hook orchestrateur principalâ”œâ”€â”€ useReseauSelector.ts           â†’ Dropdown sÃ©lection + recherche  â”œâ”€â”€ useReseauValidation.ts         â†’ Validation champs par sectionâ”œâ”€â”€ useReseauFiles.ts              â†’ Upload fichiers + storageâ”œâ”€â”€ useReseauIntegrations.ts       â†’ Gestion Brevo/Zoho/OpenAIâ””â”€â”€ types.ts                       â†’ Interfaces TypeScript (modifiÃ©)```#### ğŸ§© **COMPOSANTS UI** â†’ 7 nouveaux composants```src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/1.Reseau/Components/â”œâ”€â”€ DropdownReseauSelector.tsx     â†’ Dropdown avec recherche intÃ©grÃ©eâ”œâ”€â”€ FormOngletGeneral.tsx          â†’ Section GÃ©nÃ©ral isolÃ©eâ”œâ”€â”€ FormOngletIntegrations.tsx     â†’ Section IntÃ©grations isolÃ©e  â”œâ”€â”€ FormOngletFichiers.tsx         â†’ Section Fichiers isolÃ©eâ”œâ”€â”€ IntegrationBrevo.tsx           â†’ Sous-composant Brevoâ”œâ”€â”€ IntegrationZoho.tsx            â†’ Sous-composant Zohoâ””â”€â”€ IntegrationOpenAI.tsx          â†’ Sous-composant OpenAI```#### ğŸ—„ï¸ **BASE DE DONNÃ‰ES** â†’ 1 migration SQL```supabase/migrations/â””â”€â”€ [timestamp]_create_storage_bucket_reseau.sql  â†’ Bucket + RLS policies```#### âš¡ **EDGE FUNCTIONS** â†’ 3 nouvelles fonctions```supabase/functions/â”œâ”€â”€ update-reseau-general/         â†’ MAJ onglet GÃ©nÃ©ralâ”œâ”€â”€ update-reseau-integrations/    â†’ MAJ onglet IntÃ©grations  â””â”€â”€ update-reseau-files/           â†’ MAJ onglet Fichiers + Storage```#### ğŸ“‹ **TYPES TYPESCRIPT** â†’ 7 nouvelles interfaces principales```typescriptReseauCompleteData                 â†’ DonnÃ©es rÃ©seau avec jointuresReseauSelectorOption               â†’ Option dropdown sÃ©lectionReseauEditingStates                â†’ Ã‰tats d'Ã©dition par sectionReseauValidationErrors             â†’ Erreurs validationReseauIntegrationsData             â†’ DonnÃ©es intÃ©grationsReseauFilesData                    â†’ DonnÃ©es fichiers/storageReseauFormSections                 â†’ Sections du formulaire```### ğŸ”§ **DÃ‰TAIL FONCTIONNEL PAR HOOK**#### **1. useReseauFormData** (Hook principal - ComplexitÃ©: ğŸ”´ Ã‰levÃ©e)**RÃ´le** : Orchestrateur central - gestion Ã©tat global**ResponsabilitÃ©s** :- Chargement donnÃ©es complÃ¨tes rÃ©seau avec jointures- Gestion Ã©tats d'Ã©dition par section (gÃ©nÃ©ral/intÃ©grations/fichiers)- Coordination sauvegarde multi-tables- Interface avec tous les autres hooks**Fonctions exposÃ©es** :```typescriptloadReseauData, updateField, saveSection, cancelEdit, toggleEditMode, resetSection```#### **2. useReseauSelector** (ComplexitÃ©: ğŸŸ¡ Moyenne)**RÃ´le** : Dropdown de sÃ©lection avec recherche intelligente**ResponsabilitÃ©s** :- Recherche temps rÃ©el sur reseau_nom, organisation_nom, reseau_ville- RequÃªte avec jointure organisations- Debouncing 300ms optimisation- Formatting affichage items#### **3. useReseauValidation** (ComplexitÃ©: ğŸŸ¡ Moyenne)  **RÃ´le** : Validation mÃ©tier par section**ResponsabilitÃ©s** :- Validation champs obligatoires GÃ©nÃ©ral- Validation format API keys IntÃ©grations  - Validation types fichiers (images/PDF)- Messages d'erreur contextuels#### **4. useReseauFiles** (ComplexitÃ©: ğŸ”´ Ã‰levÃ©e)**RÃ´le** : Gestion storage multi-fichiers**ResponsabilitÃ©s** :- Upload vers bucket storage avec paths calculÃ©s- Gestion logo unique + documents multiples- Preview fichiers uploadÃ©s- Suppression fichiers + nettoyage storage#### **5. useReseauIntegrations** (ComplexitÃ©: ğŸŸ¡ Moyenne)**RÃ´le** : Gestion connexions externes**ResponsabilitÃ©s** :- Sauvegarde multi-tables (brevo_connexion, zoho_connexion, openai_connexion)- Gestion relations FK depuis table reseau- Test validation connexions API (futur)### ğŸ¯ **COMPLEXITÃ‰ PAR COMPOSANT**#### **COMPOSANTS SIMPLES** (ğŸŸ¢ Faible complexitÃ©)- `IntegrationBrevo.tsx` â†’ Formulaire 3 champs- `IntegrationZoho.tsx` â†’ Formulaire 3 champs  - `IntegrationOpenAI.tsx` â†’ Formulaire 2 champs#### **COMPOSANTS MOYENS** (ğŸŸ¡ Moyenne complexitÃ©)- `DropdownReseauSelector.tsx` â†’ Search + formatting- `FormOngletGeneral.tsx` â†’ 6 champs + champs bloquÃ©s- `FormOngletIntegrations.tsx` â†’ 3 sous-composants#### **COMPOSANTS COMPLEXES** (ğŸ”´ Haute complexitÃ©)- `FormOngletFichiers.tsx` â†’ Upload + preview + storage- `FormReseauGestion.tsx` â†’ Orchestration complÃ¨te### ğŸ—„ï¸ **MIGRATION SQL DÃ‰TAILLÃ‰E****Contenu obligatoire** :```sql-- CrÃ©ation bucket storageINSERT INTO storage.buckets (id, name, public) VALUES ('bucket-table-reseau', 'bucket-table-reseau', false);-- RLS policies isolation par organisationCREATE POLICY "Organisation access files" ON storage.objectsFOR ALL USING (  bucket_id = 'bucket-table-reseau'   AND name LIKE 'reseau-' || get_user_organisation_id(auth.uid())::text || '/%');-- Admin PRESENCA full access  CREATE POLICY "Admin PRESENCA full access storage" ON storage.objectsFOR ALL USING (is_admin_presenca(auth.uid()));```### âš¡ **EDGE FUNCTIONS STRATÃ‰GIQUES**#### **update-reseau-general**- MAJ table `reseau` champs gÃ©nÃ©ral- Validation SIRET, codes postaux- Audit log changements#### **update-reseau-integrations**  - MAJ tables `brevo_connexion`, `zoho_connexion`, `openai_connexion`- Gestion relations FK- Test validation API keys#### **update-reseau-files**- Gestion upload storage- MAJ champs `reseau_logo`, `reseau_ressources`- Nettoyage fichiers supprimÃ©s### ğŸ“ˆ **ESTIMATION DÃ‰VELOPPEMENT****Projet substantiel mais bien structurÃ©** :- **6 hooks stratÃ©giques** pour architecture modulaire- **7 composants UI** spÃ©cialisÃ©s et rÃ©utilisables  - **1 migration storage** avec sÃ©curitÃ© RLS complÃ¨te- **3 edge functions** pour logique backend- **7 interfaces TypeScript** pour typage fort**Architecture Ã©volutive** permettant extensions futures (nouvelles intÃ©grations, nouveaux types fichiers, etc.)---## ğŸš€ APPROCHE PROGRESSIVE ET MÃ‰THODIQUE - 4 PHASES**MÃ©thodologie validÃ©e** : DÃ©veloppement sÃ©quentiel avec fondations solides### PHASE 1 - INTERFACE FIRST (CrÃ©ation des formulaires)**Objectif** : CrÃ©er et valider les interfaces utilisateur de tous les onglets1. **FormOngletGeneral** â†’ CrÃ©ation des champs gÃ©nÃ©raux (6 champs Ã©ditables + 2 bloquÃ©s)2. **FormOngletIntegrations** â†’ CrÃ©ation des 3 sections Brevo/Zoho/OpenAI3. **FormOngletFichiers** â†’ CrÃ©ation upload logo + documents multiples4. **Validation visuelle** â†’ VÃ©rification UX et cohÃ©rence design**Livrables Phase 1** :- 3 composants de formulaires complets et fonctionnels visuellement- Tous les champs avec placeholders et labels appropriÃ©s- Design cohÃ©rent avec le design system- Validation de l'ergonomie avant logique mÃ©tier### PHASE 2 - CORE INFRASTRUCTURE (Hooks de base)  **Objectif** : CrÃ©er l'infrastructure de donnÃ©es et de gestion d'Ã©tat1. **useReseauSelector** â†’ Hook de sÃ©lection/recherche des rÃ©seaux2. **useReseauFormData** â†’ Hook central de gestion des donnÃ©es3. **useReseauValidation** â†’ Hook de validation mÃ©tier4. **Types/interfaces** â†’ DÃ©finition des contrats TypeScript**Livrables Phase 2** :- Hooks fonctionnels et testÃ©s indÃ©pendamment- SÃ©lection de rÃ©seau avec recherche opÃ©rationnelle- Structure de donnÃ©es typÃ©e et cohÃ©rente- Validation des champs en temps rÃ©el### PHASE 3 - PERSISTENCE BY TAB (Sauvegarde par onglet)**Objectif** : Connecter chaque onglet Ã  la persistance en base1. **Onglet GÃ©nÃ©ral** â†’ Connexion hook + sauvegarde table `reseau`2. **Onglet IntÃ©grations** â†’ Connexion hooks + sauvegarde tables connexions3. **Onglet Fichiers** â†’ CrÃ©ation bucket storage + upload sÃ©curisÃ©4. **Edge functions** â†’ APIs de sauvegarde spÃ©cialisÃ©es par onglet**Livrables Phase 3** :- Chaque onglet entiÃ¨rement fonctionnel avec persistance- Bucket storage configurÃ© avec RLS policies- Edge functions optimisÃ©es par cas d'usage- Tests de bout en bout par section### PHASE 4 - FINALISATION & INTÃ‰GRATION COMPLÃˆTE**Objectif** : Assemblage final et optimisations1. **FormReseauGestion final** â†’ IntÃ©gration complÃ¨te des 3 onglets2. **GraphBoutonModifier** â†’ IntÃ©gration du systÃ¨me d'Ã©dition3. **Tests complets** â†’ Validation de tous les workflows4. **Optimisations UX** â†’ Messages, toasts, loading states**Livrables Phase 4** :- Application complÃ¨te et testÃ©e- Tous les workflows utilisateur fonctionnels- UX polie avec feedbacks appropriÃ©s- Documentation technique finalisÃ©e### ğŸ¯ Avantages de cette approche "Interface First"- **Visuel et testable** : Validation immÃ©diate des interfaces- **Ã‰vite l'over-engineering** : Hooks crÃ©Ã©s selon besoins rÃ©els- **ItÃ©ratif** : Feedback utilisateur dÃ¨s la Phase 1- **Modulaire** : Chaque phase est indÃ©pendante et testable- **Pragmatique** : Logique mÃ©tier adaptÃ©e aux vraies contraintes UI(inchangÃ©, corrections appliquÃ©es seulement sur stockage, intÃ©grations et sÃ©lection rÃ©seau)
0 commit commentsComments0Â (0)Lock conversationCommentSubscribeYou're not receiving notifications from this thread.
