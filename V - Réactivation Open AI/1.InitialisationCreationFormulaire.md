## 1. Lancement
Bonjour 
Tu es un expert en Ia no code, int√©gration et d√©veloppement Lovable et Supabse.
Tu maitrises parfaitement les environnement Saas, les meilleures logiciels et ia 
Tu es un expert attentif, rigoureux, m√©ticuleux

- Ne pose pas de questions, pour l'instant sur ce que nous allons faire ensemble afin de ne pas t'√©garer
- En fin de message, prends l'habitude de ne pas reposer de nouvelle question, agis comme un expert rigoureux 
- Je veux d abord que tu lises les ressources que je vais de donner dans les prochains chats
- Il va y avoir plusieurs messages successifs
- Je souhaite que tu lises et analyses les fichiers dans l'ordre que je te donnerai pour ne pas m√©langer les informations
- ton travail sera de les lire attentivement.
- Attention. Les fichiers sont dans des zip, tu as mon accord pour les d√©compresser, les lire et les analyser
- Je n'ai pas besoin que tu fasses des synth√®ses de ces docs, je les connais
- Je veux simplement que tu t'impr√©gnes de leur contenus
- C est pour ton apprentissage de connaissances
- Je veux compter sur toi comme un vrai expert √† mes c√¥t√©s et j'ai besoin que tu ma√Ætrises sur le bout des doigts mon environnement.
- Es-tu pret √† lire et analyser la premiere source de documents que je vais te donner dans le message suivant.
- DIRECTIVE ABSOLUE NON NEGOCIABLE
  - Interdiction totale et absolue de commencer √† lire les documents en ressources
  - Attends mon message suivant
----
## 2. Docs Strat√©giques
Parfait
- En 1er, je te demande de bien comprendre mon application et sa strat√©gie
  - Lis Tous les fichiers ZIP du dossier en ressources
  - /mnt/data/Documents-Strat√©giques-LeadGenAI.AdBuilder.zip
  - Tu as mon accord pour d√©compresser le zip et commence imm√©diatement la lecture et l'analyse des documents contenus
- Il y  dedans des ressources essentielles √† conna√Ætre
  - ->01. Pr√©sentation LeadGenAi.md
  - ->02. Pr√©sentation Structure LeadGenAi.md
  - ->03. Logique Organisations.md
  - ->04. Relations Business entre Tables.md
  - ->05. Relations Users Utilisateurs.md
  - ->06. R√©f√©rence des Hooks Strat√©giques.md
  - ->07.1. FormCreationReseau - Gestion Informations Partag√©es entre R√©seau et R√©seau Direction.md
  - ->07.2. FormGestionReseau - Gestion Informations Partag√©es entre R√©seau et R√©seau Direction.md
  - ->08. Gestion du Menu Gauche.md
  - ->09. Structure - Organisation | Client_id.md
  - ->10. Structure des Tables de Connexion & R√®gles Collaborateurs.md
- Quand tu auras fini de lire je te donnerai une liste d autres ressources √† lire
- R√©ponds √† ce message uniquement lorsque tu auras d√©compress√© le zip, et lu attentivement les fichiers.
---
## 3. Tables
Ensuite, je te demande d√©compresser ces zip et de lire et analyser les tables de mon application et de lire tous les fichiers : 
- /mnt/data/1.Tables.Strat√©giques.zip
- /mnt/data/2.Tables.Clients.zip
- /mnt/data/3.Tables.Connexion.zip
- /mnt/data/4.Tables.Historique.zip
  - Quand tu auras fini de lire et d'analyser je te donnerai une liste d autres ressources √† lire
  - R√©ponds √† ce message uniquement lorsque tu auras d√©compress√© le zip, et lu attentivement les fichiers.
---
## 4. Hooks
Maintenant, je te demande d√©compresser ces zip, lis et analyse tous nos HOOKS
- /mnt/data/v1.HOOK-useAuth.zip
- /mnt/data/2.HOOK-useCurrentUser.zip
- /mnt/data/3.HOOK-useMultiTenant.zip
- /mnt/data/v4.HOOK-useSupabaseOperations.zip

Ensuite, je te demande d√©compresser ces zip, lis le dossier :
- /mnt/data/2.INTEGRATION SUPABASE.zip
- - D√©compresse et lis
  - Quand tu auras fini de lire et analyser, je te donnerai une liste d'autres ressources √† lire
  - R√©ponds √† ce message uniquement lorsque tu auras d√©compress√© le zip, et lu attentivement les fichiers.
---
## 5. Authentification
Parfait 
- On a travaill√© sur un espace qui va me permettre en tant qu'administrateur admin_presenca de cr√©er des tables et de les mettre √† jour
- Nous avons travaill√© sur un formulaire pour la table reseau et la table agence ind√©pendante qui sont les fichiers strat√©giques au niveau des clients
- Je d√©velopperai les autres apr√®s
- Analyse les ici, il y a les fichiers sources et les explications sont bas√©es √† partir du formulaire reseau
  - /mnt/data/FORM-RESEAU-CREATION-GESTION-Expli-Tables-Fichiers.zip
  - /mnt/data/FORM-AGENCE-INDEPENDANTE-Fichiers-Codes-Tables.zip
  - - D√©compresse et lis
    - Quand tu auras fini de lire et analyser, je te donnerai une liste d'autres ressources √† lire
    - R√©ponds √† ce message uniquement lorsque tu auras d√©compress√© le zip, et lu attentivement les fichiers.
---
## 6/ Analyse de mon application
- Analyse tous les fichiers de mon application
-     - /mnt/data/LOVABLE-LEADGENAI-ADBUILDER.zip
- D√©compresse et lis 
  - Quand tu auras fini, je te donnerai d'autres informations sur notre mission du jour.
  - R√©ponds √† ce message uniquement lorsque tu auras d√©compress√© le zip, et lu attentivement les fichiers.
  - (ce n est pas la peine de me faire de synth√®se)
---
---
## 7/ Migration LocalStorage -> Supabase
- Maintenant que les process d'authentification et de cr√©ation de tables sont en place
- Je souhaite reprendre le travail sur mon application
  - Lors du travail pr√©paratoire MVP, j'ai travaill√© en localstorage pour param√©trer mes api avec Open ai et pr√©parer tous les codes
  - Maintenant je veux travailler sur mon application et mes fonctions afin de les sauvegarder dans Supabase

### **Mon Objectif global**
 - Cr√©er une architecture SaaS multi-tenant compl√®te permettant
   - √† chaque utilisateur, (r√©seau, r√©seau direction, r√©seau agence, r√©seau agence responsable, r√©seau agence collaborateur, agence ind√©pendante, agence ind√©pendante responsable, agence ind√©pendante collaborateur)
   - d‚Äôacc√©der √† leur espace et tout particuli√®rement leur espace de cr√©ation d‚Äôannonces en 5 √©tapes reli√© √† OpenAI,
   - avec gestion s√©curis√©e des donn√©es via Supabase.
   - Concr√®tement dans mon objectif, je souhaite mettre en place la structre avec Supabse pour que lorsqu'un utilisateur se connecte (reseau, reseau direction, agence independante etc)
   - Il puisse travailler sur son espace
     - pour cr√©er des annonces via mon process en 5 √©tapes (etape1/2/3/4/5/5animation)
     - pour envoyer les informations vers open ai
     - qui restituera les donn√©es pour √™tre utilis√©e dans etape6communication
     - et √† partir de l√†, l'utilisateur pourra choisir les fonctions qu'il souhaite (annonce site internet, outils seo, emailing, sms etc...)

### **Structure multi-tenant Supabase**
- Chaque entit√© dispose d‚Äôun espace de travail isol√© et s√©curis√©, bas√© sur son organisation_id ou client_id.
- La visibilit√© hi√©rarchique est contr√¥l√©e par admin_presenca, selon la logique :
  - Pour les structures R√©seaux
    - reseau et reseau_direction -> acc√®dent √† leur espace cr√©ation (/accueil-leadgenai) et acc√®dent uniquement leurs projets (reseau et reseau_direction)
    - reseau_agence et reseau_agence_responsable -> acc√®dent √† leur espace cr√©ation (/accueil-leadgenai) et acc√®dent aux projets (reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur)
    - reseau_agence_collaborateur -> acc√®de √† son espace cr√©ation (/accueil-leadgenai) et acc√®de uniquement √† ses projets (reseau_agence_collaborateur)
  - Pour les structures Agences Ind√©pendantes
    - agence_independante et agence_independante_responsable -> acc√®dent √† leur espace cr√©ation (/accueil-leadgenai) et acc√®dent aux projets (agence_independante, agence_independante_responsable et agence_independante_collaborateur)
    - agence_independante__collaborateur -> acc√®de √† son espace cr√©ation (/accueil-leadgenai) et acc√®de uniquement √† ses projets (agence_independante__collaborateur)
  - Cette structure repose notamment sur les tables : organisations, users, utilisateurs, reseau, reseau_direction, reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur, agence_independante, agence_independante_responsable, agence_independante_collaborateur

### **Flux utilisateur global**
- Connexion / Authentification
  - Authentification via Supabase (email / mot de passe)
- Acc√®s √† l‚Äôespace personnel
  - Redirection automatique selon le r√¥le :
    - RESEAU-ESPACE
    - CLIENT-ESPACE
    - COLLABORATEUR-ESPACE
      - Chaque espace ouvre un acc√®s aux donn√©es propres accessibles √† l'utilisateur et au module accueil-leadgenai pour lancer le g√©n√©rateur d'annonces et d'outils seo
      - Prochainement il permettra de r√©cup√©rer les historiques des annonces en fonction de ses projets propres ou de son statut dans la structure multi tenant.

- POur permettre une migration parfaites localstorage vers supabase
  - J'ai souhait√© avoir une vision compl√®te et exhaustive de tous les process, champs, fonctions, hooks utilis√©s, l'utilisation des boutons, de tous les codes localstorage
  - tu vas √©tudier tous mes documents d'√©tude
- Phase 1
  - J'ai analys√© tous les process des √©tapes 1 √† 5animation
  - Dans ces √©tapes, l'utilisateur r√©unit des informations qui vont √™tre adress√©es √† open ia en vue de g√©n√©rer des fonctions qui seront utilis√©es par etape6communication
  - Ils sont dans un zip : n_Fichiers_Etape1to5.zip 
  - D√©compresse le et lis les documents suivants dans cet ordre
    - /mnt/data/n1_Etape1to5_Etape1.md
    - /mnt/data/n2_Etape1to5_Etape2.md
    - /mnt/data/n3_Etape1to5_Etape3.md
    - /mnt/data/n4_Etape1to5_Etape4.md
    - /mnt/data/n5_Etape1to5_Etape5.md
    - /mnt/data/n6_Etape1to5_Etape5animation.md
    - /mnt/data/n7_Etape1to5_BilanEtape1aEtape5.md
    - /mnt/data/n8_Etape1to5_ProcessEnvoiInfosOpenAI.md
    - /mnt/data/n9_Etape1to5_ProcessPassageEtapeSuivante.md
- Phase 2
  - J'ai ensuite analys√© tous les process et des canaux utilisable √† partir de etape6communication lorsque les infos reviennent de OPen ai
  - Ils sont dans un zip : nn_Fichiers_Etape6etCanaux.zip
  - D√©compresse le et lis les documents suivants dans cet ordre
    - /mnt/data/nn1_etape6_ProcessRecuperationOpenAI.md
    - /mnt/data/nn2_etape6_SiteInternetAnnonces.md
    - /mnt/data/nn3_etape6_SiteInternetOutilsSeo.md
    - /mnt/data/nn4_etape6_PortailsImmobiliers.md
    - /mnt/data/nn5_etape6_Cr√©erEmailingCampagneNewsletter.md
    - /mnt/data/nn6_etape6_EnvoyerCampagneSMS.md
    - /mnt/data/nn7_etape6_Cr√©erLandingPage.md
    - /mnt/data/nn8_etape6_DiffuserGoogleMB.md
    - /mnt/data/nn9_etape6_DiffuserReseaux.md
- Phase 3
  - Enfion j'ai travaill√© avac lovable sur le projet de migration
    - Lis ces fichiers dans l'ordre
    - Ils expliquent
      - La strat√©gie
      - Le projet de table avec fiche multitenant et question d'une vieille fonction timer
      - La bible avec toutes les r√©f√©rences des √©l√©ments actuels
      - Un projet de strat√©gie de migration avec un tableau
      - Enfin les projets de cr√©ation des √©l√©ments sans les codes a cette etape
        - Lis les fichiers dans cet ordre
        - nnn0_preparation_StrategiePhase1.md
        - nnn1_preparation_Table_etapes1to5.md
        - nnn1.1_preparation_GestionStrategieMultiTenant.md
        - nnn1.2_preparation_FonctionTimer.md
        - nnn1.3_ExplicationdesChamps.md
        - nnn1.5_MenuGaucheNavLinks.md
        - nnn2.0_preparation_BibleR√©f√©rences.md
        - nnn3.0_preparation_D√©tailStrat√©giePhase1.md
        - nnn3.1_preparation_TableauRecapElementsACr√©er.md
        - nnn4.0_preparation_DocumentPr√©paratoirePhase1.md


  - Arrete toi √† ce stade les autres documents en ressources ne sont pas valid√©s
  - Ils ne peuvent pas  etre consi√©d√©res comme des ressources √† m√©moriser et √™tre utilis√©s par ton intelligenece
  ---
  ---
- Notre objectif est de reproduire sans modifier les composants internes des fonctions du localstorage
  - qui servent actuellement √† r√©cup√©rer les infos des etapes 1 √† 5 et √† envoyer les prompts √† open ai
  - car ils fonctionnent parfaitement (Certains peuvent sembler √©trange mais c est voulu)
  - pour migrer ces composants Localstorage qui fonctionnent
  - vers supabase
    - En respectant √©galement les Documetns strat√©giques de l'application :
      -  /mnt/data/Documents-Strat√©giques-LeadGenAI.AdBuilder.zip
    - les tables actuelles dans supabase
      - /mnt/data/1.Tables.Strat√©giques.zip
      - /mnt/data/2.Tables.Clients.zip
      - /mnt/data/3.Tables.Connexion.zip
      - /mnt/data/4.Tables.Historique.zip
    - la strat√©gie multitenant

- Nous avons travaill√© avec lovable sur des projets de migration
  - il est ici
    - nnn4.0_preparation_DocumentPr√©paratoirePhase1.md
    - nnn4.1_validation-preparation_SECTION 1 - FONDATIONS SQ.md
    - 
- Mais nous nous sommes aper√ßus d'erreur
  - Notre travail va consister √† analyser pour chaque section
  - √©lement par √©l√©ment, ligne par ligne, code par code
  - S'il y a des erreurs par rapport √† :
  - les fonctions pr√©cises actuelles des composants supabase
  - Le projet de table etapes_1to5
- Est-ce que tu comprends le contenu de notre mission ?

---
---
---

## NOUVELLE SECTION
üëâ √âtat actuel :
- Aucune fonction SQL, trigger, RLS, ni hook sp√©cifique aux agents IA d‚Äôannonces n‚Äôexiste encore dans Supabase.
- Nous devons les cr√©er de z√©ro √† partir des documents de migration
- Nous travaillons actuellement sur la section n¬∞ 

üëâ Mission : Pr√©parer le document pr√©paratoire au codage d√©finitif de la section n¬∞
- G√©n√©rer des cahiers des charges de chaque √©l√©ment (fonctions, triggers, RLS, hooks, composants, etc) compatibles avec :
  - Les documents strat√©giques de LeadGenAI AdBuilder,
  - La table etapes_1to5 (structure, contraintes, camelCase/snake_case),
  - La bible des r√©f√©rences (process, champs, cl√©s localStorage, prompts, etc.),
  - Les documents d'audit pr√©paratoires
  - Les fichiers actuels de l'application
  - La strat√©gie multi-tenant Supabase 
  - Pour les structures **R√©seaux**
| Type utilisateur | Acc√®s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `reseau` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au r√©seau et √† sa direction) (Par respect confidentialit√© : Ne voit pas les projets des agences du r√©seau) |
| `reseau_direction` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au r√©seau et √† sa direction) (Par respect confidentialit√© : Ne voit pas les projets des agences du r√©seau)  |
| `reseau_agence` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_responsable` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |

- Pour les structures **Agences Ind√©pendantes**
| Type utilisateur | Acc√®s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `agence_independante` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_responsable` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |


üëâ Objectif :
  - G√©n√©rer un cahier des charges complet, exhausitif sous forme de tableaux
  - de chaque √©l√©ment en v√©rifiant ligne par ligne, code par code, que chaque proposition de fonction,  SQL, trigger, hook etc :
  - est techniquement correcte,
  - respecte les conventions multi-tenant et camelCase,
  - respecte les process actuels de localstorage et des fonctions, champs, composants utilis√©s 
  - afin d'etre impl√©ment√©s sans risque dans la base.

üëâ Restitution :
- G√©n√©rer un tableau clair, exhaustif, v√©rifi√©, reposant sur des informations r√©√©lles et non des extrapolations
- pour pr√©parer le codage d√©finitif de la section

---
---
---



" VERSION CORRECTION
üëâ √âtat actuel :
- Aucune fonction SQL, trigger, RLS, ni hook sp√©cifique aux agents IA d‚Äôannonces n‚Äôexiste encore dans Supabase.
- Nous devons les cr√©er de z√©ro √† partir des documents de migration (nnn4.x).

üëâ Mission :
- V√©rifier et valider la compatibilit√© des propositions de ces fonctions, triggers, RLS, hooks, et composants avec :
  - Les documents strat√©giques de LeadGenAI AdBuilder,
  - La table etapes_1to5 (structure, contraintes, camelCase/snake_case),
  - La bible des r√©f√©rences (process, champs, cl√©s localStorage, prompts, etc.),
  - La strat√©gie multi-tenant Supabase (hi√©rarchie r√©seau/agence ind√©pendante et RLS associ√©es),
  - Pour les structures **R√©seaux**
| Type utilisateur | Acc√®s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `reseau` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au r√©seau et √† sa direction) (Par respect confidentialit√© : Ne voit pas les projets des agences du r√©seau) |
| `reseau_direction` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au r√©seau et √† sa direction) (Par respect confidentialit√© : Ne voit pas les projets des agences du r√©seau)  |
| `reseau_agence` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_responsable` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |

- Pour les structures **Agences Ind√©pendantes**
| Type utilisateur | Acc√®s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `agence_independante` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_responsable` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |


üëâ Objectif :
  - Valider, ligne par ligne, que chaque proposition de fonction SQL, trigger ou hook dans les sections nnn4.1 √† nnn4.5 :
  - est techniquement correcte,
  - respecte les conventions multi-tenant et camelCase,
  - n‚Äôentre pas en conflit avec la structure ou les futures logiques de Supabase,
  - et peut √™tre impl√©ment√©e sans risque dans la base.

üëâ Restitution :
- G√©n√©rer un tableau des erreurs identifi√©es avec les colonnes /
  - NOM DE L'ERREUR	/ EMPLACEMENT /	DESCRIPTION DE L'ERREUR	/ IMPACT	/ CORRECTION REQUISE
- es-tu pr√™t √† travailler sur :
  - nnn4.2_preparation_SECTION 2 - UTILITAIRES.md

---







