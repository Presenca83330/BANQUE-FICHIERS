# 📝 Mémo – Générer les types Supabase en TypeScript

## 📍 Contexte
Ton projet utilise actuellement un fichier `types.ts` **manuel**. Pour être 100% synchro avec ta base de données, il est recommandé de générer automatiquement un fichier de types à jour à partir de Supabase.

---

## ⚙️ Étapes à suivre (à faire en local, pas dans Supabase Studio)

### 1. Ouvrir un terminal
- Sur Windows → **PowerShell** ou le terminal intégré de VSCode.
- Sur Mac/Linux → **Terminal**.

Place-toi à la racine de ton projet Node.js :
```bash
cd chemin/vers/ton-projet
```

---

### 2. Installer le CLI Supabase (si pas déjà fait)
```bash
npm install supabase --save-dev
```

👉 Si déjà installé, tu peux sauter cette étape.

---

### 3. Se connecter au projet Supabase
```bash
npx supabase login
```
- Cette commande ouvrira ton navigateur.
- Récupère ton **access token** depuis ton Dashboard Supabase (Compte > Access Tokens).
- Colle-le dans le terminal pour finaliser la connexion.

---

### 4. Générer le fichier de types
Exécute :
```bash
npx supabase gen types typescript --project-id "ksymahfrtvhnbeobsspt" --schema public > src/integrations/supabase/database.types.ts
```

- `--project-id` → correspond à ton **Project Ref** Supabase (ex. `ksymahfrtvhnbeobsspt`).
- `--schema public` → génère uniquement les types du schéma `public`.
- `> src/integrations/supabase/database.types.ts` → enregistre le résultat dans ce fichier.

---

### 5. Utiliser le fichier généré
- Remplace les imports actuels de ton `types.ts` manuel par :
  ```ts
  import type { Tables } from "@/integrations/supabase/database.types";
  ```
- Supprime ou archive l’ancien `types.ts` manuel pour éviter les doublons.

---

## ✅ Résultat attendu
- Nouveau fichier : `src/integrations/supabase/database.types.ts`.
- Contient toutes tes tables et colonnes **à jour** (y compris la suppression de `interdit_acces_admin_presenca`).
- Source unique de vérité pour tes hooks (`useAuth`, `useCurrentUser`, `useSupabaseOperations`, etc.).

---

## 🔁 Quand relancer cette commande ?
Chaque fois que tu :
- Ajoutes une nouvelle colonne à une table.
- Supprimes une colonne.
- Modifies une relation.

👉 Ça garde ton code TypeScript synchro avec ton schéma DB Supabase.

---

## 🚀 En résumé
1. Ouvrir un terminal dans ton projet.
2. Installer Supabase CLI si nécessaire.
3. `npx supabase login` (une seule fois).
4. Lancer la commande `npx supabase gen types ...`.
5. Utiliser `database.types.ts` comme référence unique pour tes types.

