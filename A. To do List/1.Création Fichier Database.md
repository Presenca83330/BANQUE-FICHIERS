# ğŸ“ MÃ©mo â€“ GÃ©nÃ©rer les types Supabase en TypeScript

## ğŸ“ Contexte
Ton projet utilise actuellement un fichier `types.ts` **manuel**. Pour Ãªtre 100% synchro avec ta base de donnÃ©es, il est recommandÃ© de gÃ©nÃ©rer automatiquement un fichier de types Ã  jour Ã  partir de Supabase.

---

## âš™ï¸ Ã‰tapes Ã  suivre (Ã  faire en local, pas dans Supabase Studio)

### 1. Ouvrir un terminal
- Sur Windows â†’ **PowerShell** ou le terminal intÃ©grÃ© de VSCode.
- Sur Mac/Linux â†’ **Terminal**.

Place-toi Ã  la racine de ton projet Node.js :
```bash
cd chemin/vers/ton-projet
```

---

### 2. Installer le CLI Supabase (si pas dÃ©jÃ  fait)
```bash
npm install supabase --save-dev
```

ğŸ‘‰ Si dÃ©jÃ  installÃ©, tu peux sauter cette Ã©tape.

---

### 3. Se connecter au projet Supabase
```bash
npx supabase login
```
- Cette commande ouvrira ton navigateur.
- RÃ©cupÃ¨re ton **access token** depuis ton Dashboard Supabase (Compte > Access Tokens).
- Colle-le dans le terminal pour finaliser la connexion.

---

### 4. GÃ©nÃ©rer le fichier de types
ExÃ©cute :
```bash
npx supabase gen types typescript --project-id "ksymahfrtvhnbeobsspt" --schema public > src/integrations/supabase/database.types.ts
```

- `--project-id` â†’ correspond Ã  ton **Project Ref** Supabase (ex. `ksymahfrtvhnbeobsspt`).
- `--schema public` â†’ gÃ©nÃ¨re uniquement les types du schÃ©ma `public`.
- `> src/integrations/supabase/database.types.ts` â†’ enregistre le rÃ©sultat dans ce fichier.

---

### 5. Utiliser le fichier gÃ©nÃ©rÃ©
- Remplace les imports actuels de ton `types.ts` manuel par :
  ```ts
  import type { Tables } from "@/integrations/supabase/database.types";
  ```
- Supprime ou archive lâ€™ancien `types.ts` manuel pour Ã©viter les doublons.

---

## âœ… RÃ©sultat attendu
- Nouveau fichier : `src/integrations/supabase/database.types.ts`.
- Contient toutes tes tables et colonnes **Ã  jour** (y compris la suppression de `interdit_acces_admin_presenca`).
- Source unique de vÃ©ritÃ© pour tes hooks (`useAuth`, `useCurrentUser`, `useSupabaseOperations`, etc.).

---

## ğŸ” Quand relancer cette commande ?
Chaque fois que tu :
- Ajoutes une nouvelle colonne Ã  une table.
- Supprimes une colonne.
- Modifies une relation.

ğŸ‘‰ Ã‡a garde ton code TypeScript synchro avec ton schÃ©ma DB Supabase.

---

## ğŸš€ En rÃ©sumÃ©
1. Ouvrir un terminal dans ton projet.
2. Installer Supabase CLI si nÃ©cessaire.
3. `npx supabase login` (une seule fois).
4. Lancer la commande `npx supabase gen types ...`.
5. Utiliser `database.types.ts` comme rÃ©fÃ©rence unique pour tes types.

