<mark># ATTENTION </mark> 
<mark># TOUJOURS METTRE EN MODE CHAT LIGHT</mark> 
---
---
## 1/ Présentation
Bonjour 
- Tu es un expert en Ia no code et intégration supabese.
- Tu maitrises parfaitement les environnement Saas, les meilleures logiciels
- Tu es un expert qui applique les directives avec rigueur, précision, tu es méticuleux
- Tu ne modifies pas ce qu on ne t a pas demandé
- Tu es un vrai expert professionnel
  - Je vais t'expliquer dans le chat suivant ce que nous allons faire ensemble.
  - DIRECTIVE ABSOLUE NON NEGOCIABLE 
  - Interdiction totale et absolue de commencer à lire les documents en ressources et de relire les messages précédents
  - Tu dois être concentrés sur la mission et les ressources que je vais te donner 
  - Attends mon message suivant
---
## 2/ Docs Stratégiques
J'aimerais que tu aies une vision complète de mon application commence par lire les documents suivants : 
  - public/1. Documents Stratégiques/01. Présentation LeadGenAi.md
  - public/1. Documents Stratégiques/02. Présentation Structure LeadGenAi.md
  - public/1. Documents Stratégiques/03. Logique Organisations.md
  - public/1. Documents Stratégiques/04. Relations Business entre Tables.md
  - public/1. Documents Stratégiques/05. Relations Users Utilisateurs.md
  - public/1. Documents Stratégiques/06. Référence des Hooks Stratégiques.md
  - public/1. Documents Stratégiques/07.1. FormCreationReseau - Gestion Informations Partagées entre Réseau et Réseau Direction.md
  - public/1. Documents Stratégiques/07.2. FormGestionReseau - Gestion Informations Partagées entre Réseau et Réseau Direction.md
  - public/1. Documents Stratégiques/08. Gestion du Menu Gauche.md
  - public/1. Documents Stratégiques/09. Structure - Organisation | Client_id.md
  - public/1. Documents Stratégiques/10. Structure des Tables de Connexion & Règles Collaborateurs.md
    - Ces fichiers te permettront de te souvenir de mon application, des rapports entre les tables, des notions d'organisation, utilisateurs, client_id, etc qui sont propres à mon application.
    - Quand tu auras fini, je te donnerai d'autres ressources à lire, ne fais pas autre chose avant ma commande suivante il faut analyser les fichiers dans l'ordre
    - (ce n est pas la peine de me faire de synthèse)
---
## 3/ Analyse de mon application
- Avant toute chose je te demande d'analyser :
- 1/ Tous les fichiers de mon application
- 2/ Toutes les tables et fonctions de supabase
- Quand tu auras fini, je te donnerai d'autres informations sur notre mission du jour.
- (ce n est pas la peine de me faire de synthèse)
---
## 4/ Migration LocalStorage -> Supabase
- Maintenant que les process d'authentification et de création de tables sont en place
- Je souhaite reprendre le travail sur mon application
  - Lors du travail préparatoire MVP, j'ai travaillé en localstorage pour paramétrer mes api avec Open ai et préparer tous les codes
  - Maintenant je veux travailler sur mon application et mes fonctions afin de les sauvegarder dans Supabase

### Mon Objectif global
 - Créer une architecture SaaS multi-tenant complète permettant
   - à chaque utilisateur, (réseau, réseau direction, réseau agence, réseau agence responsable, réseau agence collaborateur, agence indépendante, agence indépendante responsable, agence indépendante collaborateur)
   - d’accéder à leur espace et tout particulièrement leur espace de création d’annonces en 5 étapes relié à OpenAI,
   - avec gestion sécurisée des données via Supabase.
   - Concrètement dans mon objectif, je souhaite mettre en place la structre avec Supabse pour que lorsqu'un utilisateur se connecte (reseau, reseau direction, agence independante etc)
   - Il puisse travailler sur son espace
     - pour créer des annonces via mon process en 5 étapes (etape1/2/3/4/5/5animation)
     - pour envoyer les informations vers open ai
     - qui restituera les données pour être utilisée dans etape6communication
     - et à partir de là, l'utilisateur pourra choisir les fonctions qu'il souhaite (annonce site internet, outils seo, emailing, sms etc...)

### Structure multi-tenant Supabase
- Chaque entité dispose d’un espace de travail isolé et sécurisé, basé sur son organisation_id ou client_id.
- La visibilité hiérarchique est contrôlée par admin_presenca, selon la logique :
  - Pour les structures Réseaux
    - reseau et reseau_direction -> accèdent à leur espace création (/accueil-leadgenai) et accèdent uniquement leurs projets (reseau et reseau_direction)
    - reseau_agence et reseau_agence_responsable -> accèdent à leur espace création (/accueil-leadgenai) et accèdent aux projets (reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur)
    - reseau_agence_collaborateur -> accède à son espace création (/accueil-leadgenai) et accède uniquement à ses projets (reseau_agence_collaborateur)
  - Pour les structures Agences Indépendantes
    - agence_independante et agence_independante_responsable -> accèdent à leur espace création (/accueil-leadgenai) et accèdent aux projets (agence_independante, agence_independante_responsable et agence_independante_collaborateur)
    - agence_independante__collaborateur -> accède à son espace création (/accueil-leadgenai) et accède uniquement à ses projets (agence_independante__collaborateur)
  - - Cette structure repose notamment sur les tables : organisations, users, utilisateurs, reseau, reseau_direction, reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur, agence_independante, agence_independante_responsable, agence_independante_collaborateur 

### Flux utilisateur global
- Connexion / Authentification
  - Authentification via Supabase (email / mot de passe)
- Accès à l’espace personnel
  - Redirection automatique selon le rôle :
    - RESEAU-ESPACE
    - CLIENT-ESPACE
    - COLLABORATEUR-ESPACE
      - Chaque espace ouvre un accès aux données propres accessibles à l'utilisateur et au module accueil-leadgenai pour lancer le générateur d'annonces et d'outils seo
      - Prochainement il permettra de récupérer les historiques des annonces en fonction de ses projets propres ou de son statut dans la structure multi tenant.

- POur permettre une migration parfaites localstorage vers supabase
  - J'ai souhaité avoir une vision complète et exhaustive de tous les process, champs, fonctions, hooks utilisés, l'utilisation des boutons, de tous les codes localstorage

- As tu compris ma démarche?
  - Si oui je te donnerai des documents à étudier dans le message suivant
  - Ne fais pas autre chose avant ma commande suivante il faut analyser les fichiers dans l'ordre
  - (ce n est pas la peine de me faire de synthèse)
---
## 5/ Mission Phase 1
- Pour ne commettre aucune erreur dans la préparation de la migration.
- J'ai imposé l'établissements de différents documents d'études
- **Directives en 7 points des documents préparatoires**
  - **1/ Les audits des étapes et process**
  - **2/ La préparation de la table**
  - **3/ Une bible recenssant toutes les fichiers, codes, hooks, localstorage utilisés actuellement**
  - **4/ Une présentation de la stratégie**
  - **5/ Un document préparatoire avec identiifications des fichiers, hooks, sql... à créer, avec le cahier des charges précis à intégrer**
  - **6/ Un document préparatoire avec tous les codes complets**
  - **7/ La migration ne pourra être lancée avant la validation du document 6**
  - Tu vas étudier tous mes documents préparatoires

**1/ Les audits des étapes et process**
  - J'ai analysé tous les process des étapes 1 à 5animation
  - Dans ces étapes, l'utilisateur réunit des informations qui vont être adressées à open ia en vue de générer des fonctions qui seront utilisées par etape6communication
  - Lis et analyse ces documents
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/01.Etape1.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/02.Etape2.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/03.Etape3.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/04.Etape4.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/05.Etape5.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/06.Etape5animation.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/07.BilanEtape1aEtape5.md
  -   public/4. ReadMe EtapesAnnonces/01.Etape1à5/08.ProcessEnvoiInfosOpenAI.md
    - public/4. ReadMe EtapesAnnonces/01.Etape1à5/09.ProcessPassageEtapeSuivante.md


  - J'ai ensuite analysé tous les process et des canaux de etape6communication
  - Lis et analyse ces documents
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/00.ProcessRecuperationOpenAI.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/01.SiteInternetAnnonces.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/02.SiteInternetOutilsSeo.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/03.PortailsImmobiliers.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/04.CréerEmailingCampagneNewsletter.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/05.EnvoyerCampagneSMS.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/06.CréerLandingPage.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/07.DiffuserGoogleMB.md
    - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/08.DiffuserReseaux.md.

**Stratégie de migration en 2 phases**
  - Nous allons utiliser une stratégie de migration en 2 phases
- **Phase 1** :
    - Migrer le process Localstorage -> Supabase
        - Pour les étapes 1 à 5
        - Jusqu'à l"envoi des prompts vers OpenAI
- **Phase 2** :
    - Migrer le process Localstorage -> Supabase
        - De Etape5animation avec process d'animation et de gestion du statut pendant la phase d'attente des données provenant de open ai
        - En passant par la récupération des données envoyée par Open ai : 7 générations OpenAI
        - Jusqu'à la récupération par etape6communication
        - Et l'utilisation par les 8 canaux
    - Nous allons travailler exclusivement sur la phase 1

**Impératif : CONSERVATION DU NOMMAGE camelCase**
  - Nous suivons également une architecture avec CONSERVATION DU NOMMAGE camelCase
  - Tous les hooks, fonctions, et interactions Supabase créés lors de la migration
    - DOIVENT impérativement :
      - Conserver la structure camelCase existante pour les champs métier (agencyName, propertyType, saleType, price, rentAmount, rentPeriodicity, keyElements, propertyDescription, financials, details, exclusivite, location, reference).
      - Utiliser snake_case uniquement pour les champs système Supabase (organisation_id, user_id, created_at, updated_at, etc.).
     
**REGLES CONCERNANT LE NOMMAGE DES camelCase**
- **Règle SQL - Création de table**
    - Champs métier : `"camelCase"` (avec guillemets doubles)
    - Champs système : `snake_case` (sans guillemets)
- **Règle TypeScript - Hooks & Services**
    - Utilisation directe du `camelCase` pour champs métier
    - Utilisation directe du `snake_case` pour champs système
    - **AUCUNE fonction de conversion n'est nécessaire**
- **Règle Triggers**
    - Utiliser : `NEW."camelCase"` ou `NEW.snake_case`
    - Préférer les fonctions génériques réutilisables
  - Cette directive s'apppliquera à chacune de tes creations de fichier
    - J'ai encore d autres informations à te faire pâsser
    - (ce n est pas la peine de me faire de synthèse)
---
---
## 6/ Points 2 à 4 de mes directives préparatoires 
- Parfait
- Comme tu le sais je souhaite tout préparer avant de m'attaquer aux codes.
- Car si on ne passe pas par cette etape préparatoire on fait des erreurs.
  - Donc
  - **Dans le respect du point 2 de mes directives préparatoires :  La préparation de la table**
    - Nous avons défini ensemble les bases de la stratégie de migration ici :
      - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/00.StrategiePhase1.md
    - Nous avons commencé à préparer la table de migration etapes_1to5 ici :
      - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.0.Table_etapes1to5.md
        - Une table qui respecte la stratégie multi tenant que je souhaite :
        - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.1.GestionStrategieMultiTenant.md
        - Nous avons également indiqué de laisser en stand by une fonction qui ne sera pas intégré dans la migration
        - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.2.FonctionTimer.md
  - **Dans le respect du point 3 de mes directives préparatoires :  Une bible recenssant toutes les fichiers, codes, hooks, localstorage utilisés actuellement**
    - Nous avons recueilli toutes les données à avoir sous la main pour préparer notre codage c est ici :
      - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/02.0.BibleRéférences.md
  - **Dans le respect du point 4 de mes directives préparatoires :  Une présentation de la stratégie**
    - Nous avons dressé les grandes lignes de notre stratégie
      - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/03.0.DétailStratégiePhase1.md
  - **Merci de lire ces fichiers, car ma question va poser sur l'étape 5 de mes directives préparatoires**
  - ce n est pas la peine de résuner
---
---
## 7/ Point 5 de mes directives préparatoires
Donc nous arrivons à l"etape 5 des deouments préparatoires je te rappelle qu'il s'agit 
  - **5/ Un document préparatoire sans codage avec identiifications des fichiers, hooks, sql... à créer, avec le cahier des charges précis à intégrer** **->
  - Tu avais fait des propositions préparatoires au code final
  - Mais des erreurs d'analyse ont été détéctées notamment par OPen AI dans tes propositions qui risquent de rendre impossihle la migration

**Directive N°1**
- Lis et analyse tes premières propostions : 
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.0.DocumentPréparatoirePhase1.md**
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 1 - FONDATIONS SQL.md**
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 2 - UTILITAIRES.md**
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 3 - HOOKS REACT.md**
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 4 - SERVICES OPENAI.md**
      - **public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 5 - COMPOSANTS & CONTEXTES.md**
  
**Directive N°2**
- Tu avais travaillé avec Open ai et tu as mené une analyse critique de SECTION 1
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.2.1.CritiqueSECTION1.md
- **Une analyse critique qui a conduit à la rédaction de ce nouveau projet de SECTION 1**
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.3.1.VALIDATION-SECTION 1.md
- Maintenant, il faut analyser les autres sections et faire la meme analyse critique
  - Nous allons commenncer par la section 2
    - Est-ce clair au niveau du contenu de notre mission
    - Ce n est pas la peine de résumer je te poserai ma question dans le chat suivant
---
## 8/ Vérification/Correction Nouvelle section
**Directive **
- Fais une critique d'expert de cette section 2
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.1.v1.SECTION 2 - UTILITAIRES.md
  - Analyse ligne par ligne, code par code, chaque element
  - Génére dans le chat suivant une analyse sous forme de tableaux
  - avec le nom de l'erreur
  - son emplacemment dans les fichiers
  - les erreurs ou inacttidudes qui risquent de bloquer la migration
    - je te rappelle les docxuments à étudier en expert rigoureux et professionnel
    - Documents stratégiques :
      - public/1. Documents Stratégiques
    - Audits
      - public/4. ReadMe EtapesAnnonces/01.Etape1à5
    - Fichiers complets de l'application
    - Données actuelles supabase
    - Ressources préparatoires
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/00.StrategiePhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.0.Table_etapes1to5.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.1.GestionStrategieMultiTenant.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/02.0.BibleRéférences.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/03.0.DétailStratégiePhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.0.DocumentPréparatoirePhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.3.1.VALIDATION-SECTION 1.md

    - Je te rappelle que les éléments doivent être cadrés sur mon localstorage actuel qui fonctionne parfaitement
    - Tu ne dois pas intégrer de modifications aux process et contraintes actuelles
    - Il faut juste vérifier que la préparation de migration reproduit bien sans modifier les process et contraintes actuelles qui fonctionnent.
---
---
--
---
---
---
---
---
---

---
# 8/ 
<mark># ATTENTION </mark> 
<mark># PROMPT LANCEMENT</mark> 

1/ Relis les documents stratégiques
  - public/1. Documents Stratégiques/01. Présentation LeadGenAi.md
  - public/1. Documents Stratégiques/02. Présentation Structure LeadGenAi.md
  - public/1. Documents Stratégiques/03. Logique Organisations.md
  - public/1. Documents Stratégiques/04. Relations Business entre Tables.md
  - public/1. Documents Stratégiques/05. Relations Users Utilisateurs.md
  - public/1. Documents Stratégiques/06. Référence des Hooks Stratégiques.md
  - public/1. Documents Stratégiques/07.1. FormCreationReseau - Gestion Informations Partagées entre Réseau et Réseau Direction.md
  - public/1. Documents Stratégiques/07.2. FormGestionReseau - Gestion Informations Partagées entre Réseau et Réseau Direction.md
  - public/1. Documents Stratégiques/08. Gestion du Menu Gauche.md
  - public/1. Documents Stratégiques/09. Structure - Organisation | Client_id.md
  - public/1. Documents Stratégiques/10. Structure des Tables de Connexion & Règles Collaborateurs.md

2/ Relis L'intégralité des fiohiers de l'application

3/ Relis les tables et contraintes actuelles dans Supabase (hooks, fonctions...)
  - src/services/openai.ts
  - src/services/openai/1.GenerateurAnnoncesOutilsSeo/0.APIAutresFonctionsLeadGenAI/

4/ Relis Les 7 prompts dans 7.PromptsOpenAi/

5/ Relis la stratégie de la phase 1 
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/00.StrategiePhase1.md

6/ Relis les audits des étapes
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/01.Etape1.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/02.Etape2.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/03.Etape3.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/04.Etape4.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/05.Etape5.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/06.Etape5animation.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/07.BilanEtape1aEtape5.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/08.ProcessEnvoiInfosOpenAI.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1à5/09.ProcessPassageEtapeSuivante.md

7/ Relis la table prépatoire et ses notes de bas de page et le doc multitenant
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.0.Table_etapes1to5.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01.1.GestionStrategieMultiTenant.md

8/ Relis la bible des éléments de référence
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/02.0.BibleRéférences.md

9/ Relis le détail de la stratégie et le tableau récapitulatif des éléments
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/03.0.DétailStratégiePhase1.md
  - public/4. ReadMe - EtapesAnnonces/03.PreparationMigration/01.Etape1to5/03.1.TableauRecapElementsACréer.md

10/ Relis les directives préparatoires du document 
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04.0.DocumentPréparatoirePhase1.md
  - et les Impératif d'Architecture : Convention du nommage camelCase

9/ Relis les éléments préparatoires précédents



-> et donne moi le md dans le chat suivant

