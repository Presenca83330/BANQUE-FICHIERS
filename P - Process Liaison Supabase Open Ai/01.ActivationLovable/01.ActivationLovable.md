
----
## 1/ Présentation
Bonjour 
- Tu es un expert en Ia no code et intégration supabese.
- Tu maitrises parfaitement les environnement Saas, les meilleures logiciels et ia
- Tu m 'accompagnes dans la mise à jour de mon formulaire de gestion de mise jour de compte.
- Tu es un expert qui applique les directives avec rigueur, précision, tu es méticuleux et
- Tu ne modifies pas ce qu on ne t a pas demandé
- Tu es un vrai expert professionnel
Je vais t'expliquer dans le chat suivant ce que nous allons faire ensemble.
---
## 2/ Docs Stratégiques
J'aimerais que tu aies une vision complète de mon application commence par lire les documents suivants : 
- public/1. Documents Stratégiques/01. Présentation LeadGenAi.md
- public/1. Documents Stratégiques/02. Présentation Structure LeadGenAi.md
- public/1. Documents Stratégiques/03. Logique Organisations.md
- public/1. Documents Stratégiques/04. Relations Business entre Tables.md
- public/1. Documents Stratégiques/05. Relations Users Utilisateurs.md
- public/1. Documents Stratégiques/06. Référence des Hooks Stratégiques.md
- public/1. Documents Stratégiques/07.1. Stratégie - Gestion des informations partagées entre Réseau et Réseau Direction.md
- public/1. Documents Stratégiques/08. Gestion du Menu Gauche.md
- public/1. Documents Stratégiques/09. Structure - Organisation | Client_id.md
- public/1. Documents Stratégiques/10. Structure des Tables de Connexion & Règles Collaborateurs.md
- Ces fichiers te permettront de te souvenir de mon application, des rapports entre les tables, des notions d'organisation, utilisateurs, client_id, etc qui sont propres à mon application.
- Quand tu auras fini, je te donnerai d'autres ressources à lire, ne fais pas autre chose avant ma commande suivante il faut analyser les fichiers dans l'ordre
---
## 3/ Présentation du Formulaire de création/modification tables
- Parfait, nous avons longtemps travaillé sur les process d'authentification
- qui sont dans src/components/HOOKS-STRATEGIQUE
  - src/components/HOOKS-STRATEGIQUE/1.HOOK-useAuth
  - src/components/HOOKS-STRATEGIQUE/2.HOOK-useCurrentUser
  - src/components/HOOKS-STRATEGIQUE/3.HOOK-useMultiTenant
  - src/components/HOOKS-STRATEGIQUE/4.HOOK-useSupabaseOperations
- et de création de table
  - Regarde comment son créer les tables lorsque je les cree en tant que admin_presenca
  - public/3. ReadMe FormPresenca/00.BibleGenerationFormTables -> 02.TemplateFormCreation.md -> public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
  - src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/1.Reseau
  - src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante
  - Regarde également la structure des tables stratégiques/clients/connexion dans supabase
  - Quand tu auras fini, je te donnerai d'autres informations sur notre mission du jour.
---
## 4/ Nouvel object
- Maintenant que les process d'authentification et de création de tables sont en place
- Je souhaite reprendre le travail sur mon application
- Lors du travail préparatoire, j'ai travaillé en localstorage pour paramétrer mes api avec Open ai
- Maintenant je veux travailler sur mes applications, la génération d'annonces par open ai et les fonctions qui en déroulent
- Je te rappelle :
- public/1. Documents Stratégiques/01. Présentation LeadGenAi.md
- public/1. Documents Stratégiques/02. Présentation Structure LeadGenAi.md

### Objectif global
 - Créer une architecture SaaS multi-tenant complète permettant
   - à chaque utilisateur, (réseau, réseau direction, réseau agence, réseau agence responsable, réseau agence collaborateur, agence indépendante, agence indépendante responsable, agence indépendante collaborateur)
   - d’accéder à leur espace et tout particulièrement leur espace de création d’annonces en 5 étapes relié à OpenAI,
   - avec gestion sécurisée des données via Supabase.
   - Concrètement dans mon objectif, je souhaite mettre en place la structre avec Supabse pour que lorsqu'un utilisateur se connecte (reseau, reseau direction, agence independante etc)
   - Il puisse travailler sur son espace
   - pour créer des annonces via mon process en 5 étapes (etape1/2/3/4/5/5animation)
   - pour envoyer les informations vers open ai
   - qui restituera les données dans etape6communication
   - et à partir de là, l'utilisation pourra choisir les fonctions qu'il souhaite (annonce site internet, outils seo, emailing, sms etc...)

### Structure multi-tenant Supabase
- Chaque entité dispose d’un espace de travail isolé et sécurisé, basé sur son organisation_id ou client_id.
- La visibilité hiérarchique est contrôlée par admin_presenca, selon la logique :
  - Pour les structures Réseaux
    - reseau et reseau_direction -> accèdent à leur espace création (/accueil-leadgenai) et accèdent uniquement leurs projets (reseau et reseau_direction)
    - reseau_agence et reseau_agence_responsable -> accèdent à leur espace création (/accueil-leadgenai) et accèdent aux projets (reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur)
    - reseau_agence_collaborateur -> accède à son espace création (/accueil-leadgenai) et accède uniquement à ses projets (reseau_agence_collaborateur)
  - Pour les structures Agences Indépendantes
    - agence_independante et agence_independante_responsable -> accèdent à leur espace création (/accueil-leadgenai) et accèdent aux projets (agence_independante, agence_independante_responsable et agence_independante_collaborateur)
    - agence_independante__collaborateur -> accède à son espace création (/accueil-leadgenai) et accède uniquement à ses projets (agence_independante__collaborateur)
  - Cette structure repose sur :
    - Les tables : organisations, users, utilisateurs, reseau, reseau_direction, reseau_agence, reseau_agence_responsable, reseau_agence_collaborateur, agence_independante, agence_independante_responsable, agence_independante_collaborateur
    - Les RLS (Row Level Security) basées sur organisation_id
    - Des policies Supabase adaptées à chaque rôle utilisateur

### Flux utilisateur global
- Connexion / Authentification
  - Authentification via Supabase (email / mot de passe)
  - Récupération du rôle (reseau, reseau direction, reseau agence, collaborateur etc)
  - Chargement du contexte utilisateur avec useCurrentUser()
  - - Stockage du contexte global (organisation, rôle, id)
- Accès à l’espace personnel
  - Redirection automatique selon le rôle :
    - RESEAU-ESPACE
    - CLIENT-ESPACE
    - COLLABORATEUR-ESPACE
    - Chaque espace charge les données propres à son organisation_id et ses projets en cours.
   
- POur que tu te rappelles de tout ça je te demande de regarder et analyser tous les fichiers de mon application
- Ensuite, je te poserai ma question
---
## Création des Bibles
- POur nous permettre de faire des migrations parfaites localstorage vers supabase
- Nous avons besoin de préparer le terrain et d'analyser absolument tous les process actuels

- 


- Jusqu'à présent, j'ai travaillé en localStorage volontaireement pour la phase de développement/test. Maintenant je veux passer à la vraie architecture production avec Supabase.
- 
