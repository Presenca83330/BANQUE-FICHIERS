# Ok 
- on va focntionner en etape
- mais surtout ne ciommence pas Ã  identriger les pbls
- avant ma queston finale et tu laisses de cote les pbls de stripe


- Tu es un expert en Ia no code et intÃ©gration supabese.
  - Lis et MÃ©morise toutes ces directives et parcours tous ces liens
  - Je suis en train de migrer mon process de recupÃ©ration des donnÃ©es de mon gÃ©nÃ©rateur, d'envoi vers openai, de rÃ©cupÃ©ration et d'utilisation qui est en localstorage vers supabase en 2 phases
  - POur l'instant j'ai travaillÃ© sur la phase 1 (rÃ©cupÃ©ration des donnÃ©es aux Ã©tapes 1 Ã  5 et envoi Ã  open ai)
  - Mais j'ai dÃ©couvert des erreurs et j'ai besoin de toi pour les identifier
  - Mais avant tu dois absolument te remÃ©morer la structure de mon application
  - Tu vas faire ce travail de mise Ã  jour de tes informations en 3 Ã©tapes
  - ETAPE 1 -> Analyser tout ce qui fonctionne Ã  merveille en localstorage
  - ETAPE2 -> Comprendre ce qui avait Ã©tÃ© prÃ©vu et coder
  - ETAPE 3 -> On fera ensemble la correction

# ETAPE 1 - ANALYSE DE LA L'APPLICATION EN MODE LOCALSTORAGE

DIRECTIVE 1/ Lis et Analyse les Docs StratÃ©giques
  - Pour mener ta mission, tu dois avoir une vision complÃ¨te de mon application commence par lire les documents suivants :
  - public/1. Documents StratÃ©giques/01. PrÃ©sentation LeadGenAi.md
  - public/1. Documents StratÃ©giques/02. PrÃ©sentation Structure LeadGenAi.md
  - public/1. Documents StratÃ©giques/03. Logique Organisations.md
  - public/1. Documents StratÃ©giques/04. Relations Business entre Tables.md
  - public/1. Documents StratÃ©giques/05. Relations Users Utilisateurs.md
  - public/1. Documents StratÃ©giques/06. RÃ©fÃ©rence des Hooks StratÃ©giques.md
  - public/1. Documents StratÃ©giques/07.1. StratÃ©gie - Gestion des informations partagÃ©es entre RÃ©seau et RÃ©seau Direction.md
  - public/1. Documents StratÃ©giques/08. Gestion du Menu Gauche.md
  - public/1. Documents StratÃ©giques/09. Structure - Organisation | Client_id.md
  - public/1. Documents StratÃ©giques/10. Structure des Tables de Connexion & RÃ¨gles Collaborateurs.md

DIRECTIVE 2/ Lis et Analyse les Process d'authentification et d'intÃ©gration supabase
  - src/components/HOOKS-STRATEGIQUE/1.HOOK-useAuth
  - src/components/HOOKS-STRATEGIQUE/2.HOOK-useCurrentUser
  - src/components/HOOKS-STRATEGIQUE/3.HOOK-useMultiTenant
  - src/components/HOOKS-STRATEGIQUE/4.HOOK-useSupabaseOperations
  - src/integrations/supabase

DIRECTIVE 3/ Lis et Analyse le process de crÃ©ation / modification de table par admin_presenca
  - public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/02.TemplateFormCreation.md
  - public/3. ReadMe FormPresenca/00.BibleGenerationFormTables/03.TemplateFormGestion.md
  - src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/1.Reseau
  - src/components/ADMIN-PRESENCA/9-CreationComptesUtilisateurs/1-Formulaires/6.AgenceIndependante

DIRECTIVE 4/ Lis et Analyse les tables dans Supabase
  - Analyse la structure des tables stratÃ©giques/clients/connexion dans supabase
  - Tu peux les retrouver Ã  tout mmoment ici :
  - public/2. Etats des Tables /1.Tables.StratÃ©giques
  - public/2. Etats des Tables /2.Tables.Clients
  - public/2. Etats des Tables /3.Tables.Connexion

DIRECTIVE 5/ lis et Analyse les fichiers et fonctions actuelles de l'application
- Analyse les fichiers Ã  partir de : src/

DIRECTIVE 6/ Analyse et mÃ©morise tous les process en Localstorage

- PARTIE 1 : Lis et Analyse les process de rÃ©colte des informations dans les Ã©tapes 1 Ã  5 et envoi des donnÃ©es structurÃ©es Ã  Open AI
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/01.Etape1.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/02.Etape2.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/03.Etape3.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/04.Etape4.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/05.Etape5.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/06.Etape5animation.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/07.BilanEtape1aEtape5.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/08.ProcessEnvoiInfosOpenAI.md
  - public/4. ReadMe EtapesAnnonces/01.Etape1Ã 5/09.ProcessPassageEtapeSuivante.md
  - PARTIE 2 : Lis et Analyse comment sont rÃ©cupÃ©rÃ©es les donnÃ©es de OPen Ai et utilisÃ©e dans etape6communication
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/00.ProcessRecuperationOpenAI.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/01.SiteInternetAnnonces.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/02.SiteInternetOutilsSeo.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/03.PortailsImmobiliers.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/04.CrÃ©erEmailingCampagneNewsletter.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/05.EnvoyerCampagneSMS.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/06.CrÃ©erLandingPage.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/07.DiffuserGoogleMB.md
  - public/4. ReadMe EtapesAnnonces/02.Etape6Communication/08.DiffuserReseaux.md

DIRECTIVE 7/ Analyse les documents rÃ©fÃ©rences
  - Ces ressources permettent d'avoir toutes les donnÃ©es sous la main
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/02--0.BibleRÃ©fÃ©rences.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/02--1.MenuGaucheNavLinks.md

# FIN ETAPE 1 -> ANALYSE DE LA L'APPLICATION EN MODE LOCALSTORAGE

lis ces liens ne tire pas de concluion encore 
je vais te donner d atures ressorueces


---
#
ETAPE 2 -> COMPRENDRE MA STRATEGIE ET LES FICHIERS QUI ONT ETE CREES POUR LA MIGRATOIN
--

---
# **ETAPE 2** -> **COMPRENDRE MA STRATEGIE ET LES FICHIERS QUI ONT ETE CREES POUR LA MIGRATOIN**
--
## **DIRECTIVE 8 : Mon projet de migration Supabase**
  - Je vais te parler maintenant de mon projet de migration. 
  - J ai travaillÃ© avec toi sur un projet d application simple c'est pour Ã§a que l'on a  travaillÃ© en localstorage
  - Puis je me suis aperÃ§u qu'elle etait gÃ©niale en localstorage tout fonctionne Ã  merveille mais il m est impossible de la commercialiser en l etat je dois passer par supabase
  - mais pour que tu comprennes, et c'est essentiel, **je veux juste passer d un process localstorage Ã  un process supabase mais tout doit rester en l'etat, pas d'optimisation, pas d'amÃ©lioration**
  - Tout fonctionne parfaitement
    - Il faut garder les champs, les process... les validatons tout.
    - Et simplement basculer
  - Cette condition est impÃ©rative et non nÃ©gociable
  - **En rÃ©sumÃ©, mission actuelle migrer d'un modÃ¨le MVP en LocalStorage vers un modÃ¨le structurÃ© Supabase**

### **Objectif global**
 - CrÃ©er une architecture SaaS multi-tenant complÃ¨te permettant
   - Ã  chaque utilisateur, (rÃ©seau, rÃ©seau direction, rÃ©seau agence, rÃ©seau agence responsable, rÃ©seau agence collaborateur, agence indÃ©pendante, agence indÃ©pendante responsable, agence indÃ©pendante collaborateur)
   - dâ€™accÃ©der Ã  leur espace et tout particuliÃ¨rement leur espace de crÃ©ation dâ€™annonces en 5 Ã©tapes reliÃ© Ã  OpenAI,
   - avec gestion sÃ©curisÃ©e des donnÃ©es via Supabase.
   - Objectif clair : mettre en place la structre avec Supabse pour que lorsqu'un utilisateur se connecte (reseau, reseau direction, agence independante etc) et qu'il puisse travailler sur son espace
     - pour rÃ©cupÃ©rer des informations via le process en 5 Ã©tapes (etape1/2/3/4/5/5animation)
     - pour envoyer les donnÃ©es vers open ai
     - qui restituera les annonces sous un format imposÃ© pour Ãªtre utilisÃ©es dans etape6communication
     - et permettre Ã  l'utilisateur de choisir les fonctions qu'il souhaite utiliser (annonce site internet, outils seo, emailing, sms etc...)
    
  ### **ImpÃ©ratif : MIGRER A L'IDENTIQUE**
  - Aujourd'hui l'application fonctionne Ã  merveille,
  - L'OBJECTIF : est simplement de Passer de localStorage Ã  Supabase
  - SANS RIEN CHANGER D'AUTRE
  - Garder TOUS les champs (noms, types, structures)
  - Garder TOUS les processus (crÃ©ation, validation, gestion)
  - Garder TOUTES les validations (cÃ´tÃ© client identiques)
  - Garder TOUTE la logique mÃ©tier (hooks, formulaires, flows)
  - Garder TOUTE l'UX/UI (mÃªme comportement utilisateur)
    - C'est une migration technique pure, pas une refonte.

### **Structure multi-tenant Supabase et RÃ¨gles de visibilitÃ© hiÃ©rarchique**
  - Chaque entitÃ© dispose dâ€™un espace de travail isolÃ© et sÃ©curisÃ©, basÃ© sur son organisation_id ou client_id.
  - La visibilitÃ© hiÃ©rarchique est contrÃ´lÃ©e par admin_presenca.
  - La visibilitÃ© hiÃ©rarchique et les accÃ¨s utilisateurs sont gÃ©rÃ©s exclusivement via les RLS policies SQL, appliquÃ©es sur les tables principales. Les hooks front nâ€™assurent que lâ€™injection des identifiants organisationnels.

### **Flux utilisateur global**
- Connexion / Authentification
  - Authentification via Supabase (email / mot de passe)
- AccÃ¨s Ã  lâ€™espace personnel
  - Redirection automatique selon le rÃ´le :
    - RESEAU-ESPACE
    - CLIENT-ESPACE
    - COLLABORATEUR-ESPACE
    - Chaque espace ouvre un accÃ¨s aux donnÃ©es propres accessibles Ã  l'utilisateur et au module accueil-leadgenai pour lancer le gÃ©nÃ©rateur d'annonces et d'outils seo
    - Prochainement il permettra de rÃ©cupÃ©rer les historiques des annonces en fonction de ses projets propres ou de son statut dans la structure multi tenant.
---
## **Directive 9/ StratÃ©gie de migration en 2 phases**
- Nous utilisons une stratÃ©gie de migration en 2 phases non nÃ©gociable
- **Phase 1** :
    - Migrer le process Localstorage de rÃ©cupÃ©ration des infos et d'envoi vers -> Supabase
        - RÃ©cupÃ©ration des donnÃ©es lors des Ã©tapes 1 Ã  5
        - Jusqu'Ã  l'envoi des prompts vers OpenAI
        - GÃ©rer Etape5animation avec process d'animation et de gestion du statut pendant la phase d'attente des donnÃ©es provenant de open ai
- **Phase 2** :
    - Migrer le process Localstorage vers -> Supabase
        - RÃ©cupÃ©ration des donnÃ©es envoyÃ©e par Open ai et injection dans les 8 canaux 
        - De la page etape6communication
  - **Je te rappelle que nous travaillons exclusivement sur la migration Phase 1 en ce moment**
---
## **Directive 10/ Conservation non nÃ©gociable du nommage camelCase**
  - Nous suivons une architecture avec CONSERVATION DU NOMMAGE camelCase non nÃ©gociable
  - Tous les hooks, fonctions, et interactions Supabase crÃ©Ã©s lors de la migration
    - **DOIVENT impÃ©rativement** :
      - Conserver la structure camelCase existante pour les champs mÃ©tier (agencyName, propertyType, saleType, price, rentAmount, rentPeriodicity, keyElements, propertyDescription, financials, details, exclusivite, location, reference).
      - Utiliser snake_case uniquement pour les champs systÃ¨me Supabase (organisation_id, user_id, created_at, updated_at, project_id, etc.).
      - Contrairement Ã  une idÃ©e reÃ§ue, PostgreSQL/Supabase accepte parfaitement les noms de colonnes en camelCase, ils sont simplement encadrÃ©s par des guillemets doubles dans les requÃªtes si nÃ©cessaire.
  - Cette directive s'apppliquera Ã  chacune de tes creations de fichier
    - (ce n est pas la peine de me faire de synthÃ¨se)

**RÃ¨gles concernant le nommage des camelCase**
- **RÃ¨gle SQL - CrÃ©ation de table**
    - Champs mÃ©tier : `"camelCase"` (avec guillemets doubles)
    - Champs systÃ¨me : `snake_case` (sans guillemets)
- **RÃ¨gle TypeScript - Hooks & Services**
    - Utilisation directe du `camelCase` pour champs mÃ©tier
    - Utilisation directe du `snake_case` pour champs systÃ¨me
    - **AUCUNE fonction de conversion n'est nÃ©cessaire**
- **RÃ¨gle Triggers**
    - Utiliser : `NEW."camelCase"` ou `NEW.snake_case`
    - PrÃ©fÃ©rer les fonctions gÃ©nÃ©riques rÃ©utilisables
  - Cette directive s'apppliquera Ã  chacune de tes creations de fichier

---
## **Directive 11/ Structure Multi tenant**
- Nous suivons une structure multi tenant avec une structure de visibilitÃ© imposÃ©e.

**Pour les structures** **RÃ©seaux**
| Type utilisateur | AccÃ¨s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `reseau` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au rÃ©seau et Ã  sa direction) (Par respect confidentialitÃ© : Ne voit pas les projets des agences du rÃ©seau) |
| `reseau_direction` | `/accueil-leadgenai` | reseau + reseau_direction (projets internes au rÃ©seau et Ã  sa direction) (Par respect confidentialitÃ© : Ne voit pas les projets des agences du rÃ©seau)  |
| `reseau_agence` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_responsable` | `/accueil-leadgenai` | reseau_agence + reseau_agence_responsable + reseau_agence_collaborateur |
| `reseau_agence_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |

**Pour les structures** **Agences IndÃ©pendantes**
| Type utilisateur | AccÃ¨s espace | Voit les projets de |
|------------------|--------------|---------------------|
| `agence_independante` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_responsable` | `/accueil-leadgenai` | agence_independante + agence_independante_responsable + agence_independante_collaborateur |
| `agence_independante_collaborateur` | `/accueil-leadgenai` | **Uniquement ses propres projets** |

La visibilitÃ© hiÃ©rarchique et les accÃ¨s utilisateurs sont gÃ©rÃ©s exclusivement via les RLS policies SQL, appliquÃ©es sur les tables principales. Les hooks front nâ€™assurent que lâ€™injection des identifiants organisationnels.
---
## **DIRECTIVE 12/ Analyse des documents prÃ©paratoires
- Pour m'aider Ã  mettre en place, j ai demandÃ© Ã  OPen ai et Claude de me prÃ©parer des documents prÃ©paratoires jusqu'aux codes finaux
  - Mais j'ai qu'il y avait des erreurs
  - Ta mission va Ãªtre ici de lire tous les documents qui ont Ã©tÃ© prÃ©parÃ©s, ils sont dans l'ordre de crÃ©ation, donc parfois il y a des amenagements mais tu dois comprnndre le process
- Mais fais attention dans ta lecture, ce sont des documents initiaux, des amÃ©nagements ont pu Ãªtre apportÃ©s
- **1/ lis comment j ai dÃ©fini ma stratÃ©gie de migration localstorage - vers supabase**
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/.00--0.StrategiePhase1.md
- **2/ lis ces documents qui prÃ©voit la creation de la table pour cette migrationt, la logique multi tenant associÃ©, et une focntion qu on va laisser en stand by**
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/01--0.DocPrep.Table_etapes1to5.md
- **3/ Lis les documets qui prÃ©sentent les gdes lignes de la road map de la stratÃ©gie migration phase 1**
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/03--0.Road.Prep.Phase1.md
- **4/ Lis les directives concernant les services open ai,  et la crÃ©ation de 2 nouvelles tables**
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/04--0.DocsPrepOpenAi-2Tables.md

- Lis ces ressources prÃ©paratoires Ã  la migration ensuite je te donnerai des infos sur la migration effectuÃ©es
---
# POINT SUR LA MIGRATION
- Voici je vais te donner des informations sur la migration
- Nous avons fait plusieurs correctifs successifs
- DerniÃ¨rement tu avais fait ces audits
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/13--1.25.11.2025.Corrections.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/13--2.25.11.2025.Corrections.md
- Ensuite on a travaiillÃ© sur mon projet de cycle utilisateur qui n avait pas Ã©tÃ© respectÃ©
- tu as fait un projet mais on a conservÃ© celui de claude
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--1.25.11.Cycledevie.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--2.25.11.ProjClaudeCycle.md
- Le cycle de vie des projets dans `etapes_1to5` suit 3 Ã©tats :

| Statut | Signification | 
|--------|---------------|
| `brouillon` | Projet en cours de saisie Ã  l'Ã©tapes 1  |
| `attente_validation` | A partir de Ã‰tape 2 jusqu'aprÃ¨s le clic de Validation Ã  Etape 4 -> Utilisateur est arrivÃ© Etape 5 mais  n'a pas encore cliquÃ© sur GÃ©nÃ©rer |
| `archive` | Clic sur GÃ©nÃ©rer Ã  l'Etape 5 

- AprÃ¨s plusieurs correctifs voici les fichiers en place actuellement
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.00.CodesPhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.01.CodesPhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.02.CodesPhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.03.CodesPhase1.md
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.04.CodesPhase1.md

---
# ðŸ“‹ **NOMENCLATURE COMPLÃˆTE DES FICHIERS - PHASE 1**

Voici le tableau rÃ©capitulatif de **tous les fichiers** utilisÃ©s dans la Phase 1 de la migration, organisÃ©s par type :

---

### **1. PAGES - Interface Utilisateur**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `Etape1.tsx` | `src/1.etapes-generation-annonces/etape1/Etape1.tsx` |
| 2 | `Etape2.tsx` | `src/1.etapes-generation-annonces/etape2/Etape2.tsx` |
| 3 | `Etape3.tsx` | `src/1.etapes-generation-annonces/etape3/Etape3.tsx` |
| 4 | `Etape4.tsx` | `src/1.etapes-generation-annonces/etape4/Etape4.tsx` |
| 5 | `Etape5.tsx` | `src/1.etapes-generation-annonces/etape5/Etape5.tsx` |
| 6 | `Animation.tsx` | `src/1.etapes-generation-annonces/etape5/Animation.tsx` |

---

### **2. FORMULAIRES**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `EnsembleFormulairesEtape1Form.tsx` | `src/components/1-Sources-Generation-Annonces/form-etape1/EnsembleFormulairesEtape1Form.tsx` |
| 2 | `SaisieDescriptionForm.tsx` | `src/components/1-Sources-Generation-Annonces/form-etape2/SaisieDescriptionForm.tsx` |
| 3 | `SaisieFinancialForm.tsx` | `src/components/1-Sources-Generation-Annonces/form-etape3/SaisieFinancialForm.tsx` |
| 4 | `SaisieDetailsForm.tsx` | `src/components/1-Sources-Generation-Annonces/form-etape4/SaisieDetailsForm.tsx` |

---

### **3. HOOKS TECHNIQUES**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `useStepProgress.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/01.Hooks/00.Technique/useStepProgress.ts` |

---

### **4. HOOKS MÃ‰TIER (par Ã‰tape)**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `HookEtape-1.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/01.Hooks/01.Etape1/HookEtape-1.ts` |
| 2 | `HookEtape-2.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/01.Hooks/02.Etape2/HookEtape-2.ts` |
| 3 | `HookEtape-3.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/01.Hooks/03.Etape3/HookEtape-3.ts` |
| 4 | `HookEtape-4.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/01.Hooks/04.Etape4/HookEtape-4.ts` |

---

### **5. UTILITAIRES**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `convertLocalToSupabase.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/convertLocalToSupabase.ts` |
| 2 | `formatAddress.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/formatAddress.ts` |
| 3 | `formatCurrency.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/formatCurrency.ts` |
| 4 | `mapPromptOutput.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/mapPromptOutput.ts` |
| 5 | `mapSupabaseToPrompt.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/mapSupabaseToPrompt.ts` |
| 6 | `sanitizeText.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/sanitizeText.ts` |
| 7 | `validateEtape1.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/validateEtape1.ts` |
| 8 | `validateEtape2.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/validateEtape2.ts` |
| 9 | `validateEtape3.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/validateEtape3.ts` |
| 10 | `validateEtape4.ts` | `src/components/HOOKS-ANNONCES/01.HOOKS-ETAPE1TO5/03.Utilitaires/validateEtape4.ts` |


| NÂ° | Fichier | Chemin complet |
|----|---------|----------------|
| 1 | useSgaForm.ts | `src/components/1-Sources-Generation-Annonces/utils/` | -> A supprimer
| 2 | useBoutonGenerationNewProjet.tsx | `src/components/1-Sources-Generation-Annonces/utils/` |

---

### **6. PROMPTS OPENAI**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `1.PromptAnnonceSiteInternet.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/1.PromptAnnonceSiteInternet.ts` |
| 2 | `2.PromptAnnonceFichedeSynthese.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/2.PromptAnnonceFichedeSynthese.ts` |
| 3 | `3.PromptAnnonceNewsletter.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/3.PromptAnnonceNewsletter.ts` |
| 4 | `4.PromptOutilsSEO.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/4.PromptOutilsSEO.ts` |
| 5 | `5.PromptSMSAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/5.PromptSMSAnnonce.ts` |
| 6 | `6.PromptGoogleBusinessProfileAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/6.PromptGoogleBusinessProfileAnnonce.ts` |
| 7 | `7.PromptReseauxSociauxAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/7.PromptReseauxSociauxAnnonce.ts` |
| 8 | `N7.IntegrationEtUtilisationDesChamps.ts` | `src/services/openai/01.SupabaseEtape1to5/00.PromptsOpenAi/N7.IntegrationEtUtilisationDesChamps.ts` |

---

### **7. SERVICES OPENAI (Client)**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `1.AnnonceSiteInternet.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/1.AnnonceSiteInternet.ts` |
| 2 | `2.AnnonceFichedeSynthese.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/2.AnnonceFichedeSynthese.ts` |
| 3 | `3.AnnonceNewsletter.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/3.AnnonceNewsletter.ts` |
| 4 | `4.OutilsSEO.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/4.OutilsSEO.ts` |
| 5 | `5.SMSAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/5.SMSAnnonce.ts` |
| 6 | `6.GoogleBusinessProfileAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/6.GoogleBusinessProfileAnnonce.ts` |
| 7 | `7.ReseauxSociauxAnnonce.ts` | `src/services/openai/01.SupabaseEtape1to5/1.Services/7.ReseauxSociauxAnnonce.ts` |

---

### **8. HELPERS OPENAI**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `callSecureGenerate.ts` | `src/services/openai/01.SupabaseEtape1to5/2.Helpers/callSecureGenerate.ts` |
| 2 | `fillPrompt.ts` | `src/services/openai/01.SupabaseEtape1to5/2.Helpers/fillPrompt.ts` |
| 3 | `types.ts` | `src/services/openai/01.SupabaseEtape1to5/2.Helpers/types.ts` |

---

### **9. EDGE FUNCTIONS (Backend Supabase)**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `index.ts` | `supabase/functions/1.AnnonceSiteInternet/index.ts` |
| 2 | `index.ts` | `supabase/functions/2.AnnonceFichedeSynthese/index.ts` |
| 3 | `index.ts` | `supabase/functions/3.AnnonceNewsletter/index.ts` |
| 4 | `index.ts` | `supabase/functions/4.OutilsSEO/index.ts` |
| 5 | `index.ts` | `supabase/functions/5.SMSAnnonce/index.ts` |
| 6 | `index.ts` | `supabase/functions/6.GoogleBusinessProfileAnnonce/index.ts` |
| 7 | `index.ts` | `supabase/functions/7.ReseauxSociauxAnnonce/index.ts` |

---

### **10. EDGE FUNCTIONS - SHARED (Modules PartagÃ©s)**

| NÂ° | Fichier | Chemin complet |
|:--:|---------|----------------|
| 1 | `constants.ts` | `supabase/functions/Shared/constants.ts` |
| 2 | `helpers.ts` | `supabase/functions/Shared/helpers.ts` |
| 3 | `types.ts` | `supabase/functions/Shared/types.ts` |

---

### **11. INTÃ‰GRATION SUPABASE..

| NÂ° | Fichier | Chemin complet |
|----|---------|----------------|
| 1 | client.ts | `src/integrations/supabase/` |
---
### **12. AIDE & WIDGETS**

| NÂ° | Fichier | Chemin complet |
|----|---------|----------------|
| 1 | EtapeFAQ.tsx | `src/components/1-Sources-Generation-Annonces/help/` |
| 2 | SgaHelpBox.tsx | `src/components/1-Sources-Generation-Annonces/help/` |
| 3 | ImageRobotHeaderMauve.tsx | `src/components/widgets/quote/` |
| 4 | circular-progress.tsx | `src/components/ui/` |
| 5 | BoutonNouveauProjet.tsx | `src/components/1-Sources-Restitution-Utilisateur/0.Etape6Communication/` |
---
### **13. TEMPLATE & LAYOUT**

| NÂ° | Fichier | Chemin complet |
|----|---------|----------------|
| 1 | Layout.V2.GenAnn.tsx | `src/components/atemplate.v2.generation-annonces/` |
| 2 | DirectivesMenuOnglet.tsx | `src/components/atemplate.v2.generation-annonces/` |
| 3 | atemplate.V2.GenAnn.css | `src/components/atemplate.v2.generation-annonces/` |
| 4 | StructureHeroPetit.tsx | `src/0.structure-type-page/structure5HeroPetit/` |
| 5 | Structure5ContainerVide.tsx | `src/0.structure-type-page/structure5HeroPetit/` |
| 6 | NavLinks.tsx | `src/components/navigation-site-leadgenaiadbuilder/` |
---

### **14. AnnonceContext.tsx**

| NÂ° | Fichier | Chemin complet |
|----|---------|----------------|
| 1 | AnnonceContext.tsx | `src/contexts/AnnonceContext.tsx` |
---
Lis ces informations et je te pose ma question 

- 

- **5/ Lis les codes actuels**
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.00.CodesPhase1.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.01.CodesPhase1.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.02.CodesPhase1.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.03.CodesPhase1.md
  - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/..v1.04.CodesPhase1.md
---
## Next Step

----
---
# Parfait
- PrÃ©cedemment tu avais fait ce prompt de reprise
- nous voulions analyser les erreurs possibles dans etape 1 Ã  5 et modifier le clycle de vie client
- tu avais fait ces rapports
-  public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--1.25.11.Cycledevie.md
    - Ensuite Claude a proposÃ© une autre stratÃ©gie
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--2.25.11.ProjClaudeCycle.md
 
    - j'avais voulu ensuite modifier le cycle de vie client et tu avais fait une proposition
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--1.25.11.Cycledevie.md
    - Ensuite Claude a proposÃ© une autre stratÃ©gie
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/14--2.25.11.ProjClaudeCycle.md
    - qui a prÃ©parÃ© les codes prÃ©paratoires que nous avons appliquÃ©s
    - public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/17--ProjClaude
    - .1.README.md
    - 01_modify_statut_column.sql
    - 02_migrate_existing_data.sql
    - 03_create_cron_cleanup.sql
    - Animation.tsx
    - DirectivesMenuOnglet.tsx
    - EnsembleFormulairesEtape1Form.tsx
    - Etape5.tsx
    - INSTALLATION.md
    - MODIFICATIONS.md
    - ROLLBACK.md
    - TESTS.md
    - useBoutonGenerationNewProjet.tsx
    - useStepProgress.ts
 
- lis bien ces dernieres infos et je te pose ma question
---
# Autres erreurs
- Nous avons identifiÃ©s d"autres erreurs
- public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/1.Correct.13points/CORRECTION_01_Frontend.md
- public/4. ReadMe EtapesAnnonces/03.PreparationMigration/01.Etape1to5/1.Correct.13points/CORRECTION_02_EdgeFunctions.md
- Que nous avons corrigÃ© mais d'autres erreurs existent encore
- 

---
# Parfait
Donc nous avons fait ces correctifs
j ai fait un test
mais j ai encore une erreur 
lorsque en tant qu admin  j ai voulu valider l etape 2

peux tu analyser l erreru ?
